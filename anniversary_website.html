<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÊàëÂÄëÁöÑÈÄ±Âπ¥Á¥ÄÂøµ üíï</title>
    
    <!-- Favicon Ë®≠ÂÆö -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGRlZnM+CjxsaW5lYXJHcmFkaWVudCBpZD0iZ3JhZGllbnQiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPgo8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjNjY3ZWVhIi8+CjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzc2NGJhMiIvPgo8L2xpbmVhckdyYWRpZW50Pgo8L2RlZnM+CjxyZWN0IHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgcng9IjgiIGZpbGw9InVybCgjZ3JhZGllbnQpIi8+Cjx0ZXh0IHg9IjE2IiB5PSIyMiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmaWxsPSJ3aGl0ZSI+üíïPC90ZXh0Pgo8L3N2Zz4K">
    <link rel="apple-touch-icon" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgwIiBoZWlnaHQ9IjE4MCIgdmlld0JveD0iMCAwIDE4MCAxODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxkZWZzPgo8bGluZWFyR3JhZGllbnQgaWQ9ImdyYWRpZW50IiB4MT0iMCUiIHkxPSIwJSIgeDI9IjEwMCUiIHkyPSIxMDAlIj4KPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzY2N2VlYSIvPgo8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiM3NjRiYTIiLz4KPC9saW5lYXJHcmFkaWVudD4KPC9kZWZzPgo8cmVjdCB3aWR0aD0iMTgwIiBoZWlnaHQ9IjE4MCIgcng9IjQwIiBmaWxsPSJ1cmwoI2dyYWRpZW50KSIvPgo8dGV4dCB4PSI5MCIgeT0iMTEwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iNjAiIGZpbGw9IndoaXRlIj7wn5KVPC90ZXh0Pgo8L3N2Zz4K">
    
    <!-- PWA ÊîØÊè¥ -->
    <meta name="theme-color" content="#764ba2">
    <meta name="description" content="Ë®òÈåÑÊàëÂÄëÊÑõÊÉÖÊïÖ‰∫ãÁöÑÊØè‰∏ÄÂÄãÁæéÂ•ΩÊôÇÂàª">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* ÊòüÁ©∫ËÉåÊôØ */
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
        }

        .star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: white;
            border-radius: 50%;
            animation: twinkle 2s infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        /* ÊµÆÂãïÊÑõÂøÉÂãïÁï´ */
        .floating-hearts {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .heart {
            position: absolute;
            font-size: 20px;
            color: rgba(255, 182, 193, 0.7);
            animation: float 6s infinite ease-in-out;
        }

        @keyframes float {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }

        /* ÁÖôÁÅ´ÊïàÊûú */
        .fireworks {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 999;
        }

        .firework {
            position: absolute;
            width: 5px;
            height: 5px;
            border-radius: 50%;
            animation: explode 1s ease-out forwards;
        }

        @keyframes explode {
            0% {
                transform: scale(0);
                opacity: 1;
            }
            100% {
                transform: scale(20);
                opacity: 0;
            }
        }

        /* ‰∏ªÂÆπÂô® */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 2;
        }

        /* Èü≥Ê®ÇÊéßÂà∂Âô® */
        .music-control {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 50px;
            padding: 10px 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .music-control:hover {
            background: rgba(255, 255, 255, 1);
            transform: scale(1.1);
        }

        .music-control.playing {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            animation: musicPulse 2s infinite;
        }

        @keyframes musicPulse {
            0%, 100% { transform: scale(1); box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
            50% { transform: scale(1.05); box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4); }
        }

        /* Èü≥Ê®ÇË¶ñË¶∫ÂåñÊåáÁ§∫Âô® */
        .music-visualizer {
            display: none;
            align-items: center;
            gap: 2px;
        }

        .music-control.playing .music-visualizer {
            display: flex;
        }

        .music-bar {
            width: 3px;
            background: white;
            border-radius: 2px;
            animation: musicBar 0.8s infinite;
        }

        .music-bar:nth-child(1) { height: 8px; animation-delay: 0s; }
        .music-bar:nth-child(2) { height: 12px; animation-delay: 0.1s; }
        .music-bar:nth-child(3) { height: 6px; animation-delay: 0.2s; }
        .music-bar:nth-child(4) { height: 10px; animation-delay: 0.3s; }

        @keyframes musicBar {
            0%, 100% { height: 4px; }
            50% { height: 15px; }
        }

        /* Èü≥ÈáèÊéßÂà∂ */
        .volume-control {
            position: fixed;
            top: 70px;
            right: 20px;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            display: none;
            align-items: center;
            gap: 10px;
            min-width: 150px;
        }

        .volume-control.show {
            display: flex;
        }

        .volume-slider {
            flex: 1;
            height: 5px;
            background: #ddd;
            border-radius: 5px;
            outline: none;
            -webkit-appearance: none;
        }

        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 15px;
            height: 15px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 50%;
            cursor: pointer;
        }

        .volume-slider::-moz-range-thumb {
            width: 15px;
            height: 15px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 50%;
            cursor: pointer;
            border: none;
        }

        /* Ê®ôÈ°åÂçÄÂüü */
        .header {
            text-align: center;
            margin-bottom: 50px;
            color: white;
            animation: fadeInDown 1s ease-out;
        }

        .header h1 {
            font-size: 3rem;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        /* Âç°ÁâáÊ®£Âºè */
        .card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
            animation: fadeInUp 1s ease-out;
            transition: all 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.2);
        }

        /* Ë®àÊï∏Âô® */
        .counter {
            text-align: center;
            margin-bottom: 40px;
        }

        .counter h2 {
            color: #764ba2;
            font-size: 2rem;
            margin-bottom: 20px;
        }

        .time-display {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .time-unit {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            min-width: 80px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        .time-unit .number {
            font-size: 2rem;
            font-weight: bold;
            display: block;
        }

        .time-unit .label {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        /* ÁÖßÁâá‰∏äÂÇ≥ÂçÄÂüü */
        .photo-upload {
            text-align: center;
            margin-bottom: 30px;
        }

        .upload-btn {
            background: linear-gradient(135deg, #ff6b6b, #ee5a52);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .upload-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        /* ÁÖßÁâáÁï´Âªä */
        .photo-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .photo-item {
            position: relative;
            aspect-ratio: 1;
            border-radius: 15px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .photo-item:hover {
            transform: scale(1.05) rotate(2deg);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .photo-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .photo-item .caption {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(0,0,0,0.8));
            color: white;
            padding: 20px 15px 15px;
            transform: translateY(100%);
            transition: transform 0.3s ease;
        }

        .photo-item:hover .caption {
            transform: translateY(0);
        }

        /* ÁÖßÁâáÊéßÂà∂ÊåâÈàï */
        .photo-controls {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            gap: 5px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .photo-item:hover .photo-controls {
            opacity: 1;
        }

        .photo-control-btn {
            background: rgba(0, 0, 0, 0.7);
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .photo-control-btn:hover {
            background: rgba(255, 0, 0, 0.8);
            transform: scale(1.1);
        }

        .photo-control-btn.edit-btn:hover {
            background: rgba(0, 123, 255, 0.8);
        }

        /* ÁÖßÁâáÊ®ôÈ°åÁ∑®ËºØ */
        .caption-input {
            background: transparent;
            border: none;
            color: white;
            width: 100%;
            font-size: inherit;
            padding: 0;
            outline: none;
            border-bottom: 1px solid rgba(255, 255, 255, 0.5);
        }

        .caption-input:focus {
            border-bottom-color: white;
        }

        /* ÊôÇÈñìËª∏ */
        .timeline {
            position: relative;
            max-width: 800px;
            margin: 0 auto;
        }

        .timeline::after {
            content: '';
            position: absolute;
            width: 6px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            top: 0;
            bottom: 0;
            left: 50%;
            margin-left: -3px;
            border-radius: 3px;
        }

        .timeline-item {
            position: relative;
            width: 50%;
            padding: 20px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            animation: slideIn 0.5s ease-out;
            transition: all 0.3s ease;
        }

        .timeline-item:hover {
            background: rgba(255, 255, 255, 1);
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }

        .timeline-item:nth-child(odd) {
            left: 0;
            transform: translateX(-20px);
        }

        .timeline-item:nth-child(even) {
            left: 50%;
            transform: translateX(20px);
        }

        .timeline-item::after {
            content: '';
            position: absolute;
            width: 25px;
            height: 25px;
            right: -17px;
            background: linear-gradient(135deg, #ff6b6b, #ee5a52);
            border: 4px solid white;
            top: 15px;
            border-radius: 50%;
            z-index: 1;
        }

        .timeline-item:nth-child(even)::after {
            left: -16px;
        }

        /* ÊôÇÈñìËª∏Á∑®ËºØÊéßÂà∂ */
        .timeline-controls {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            gap: 5px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .timeline-item:hover .timeline-controls {
            opacity: 1;
        }

        .timeline-control-btn {
            background: rgba(118, 75, 162, 0.8);
            color: white;
            border: none;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .timeline-control-btn:hover {
            background: rgba(118, 75, 162, 1);
            transform: scale(1.1);
        }

        .timeline-control-btn.delete-btn:hover {
            background: rgba(255, 0, 0, 0.8);
        }

        /* ÊôÇÈñìËª∏Á∑®ËºØË°®ÂñÆ */
        .timeline-edit-form {
            display: none;
            margin-top: 15px;
            padding: 15px;
            background: rgba(247, 247, 247, 0.9);
            border-radius: 10px;
            border: 2px solid #764ba2;
        }

        .timeline-edit-form.editing {
            display: block;
        }

        .edit-input {
            width: 100%;
            padding: 8px;
            margin: 5px 0;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }

        .edit-input:focus {
            outline: none;
            border-color: #764ba2;
        }

        .edit-input[type="date"] {
            padding: 10px 8px;
            color: #333;
            background: white;
        }

        .edit-input[type="date"]::-webkit-calendar-picker-indicator {
            background: #764ba2;
            border-radius: 3px;
            cursor: pointer;
        }

        .edit-btn-group {
            text-align: right;
            margin-top: 10px;
        }

        .edit-save-btn, .edit-cancel-btn {
            padding: 6px 12px;
            margin-left: 5px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
        }

        .edit-save-btn {
            background: #28a745;
            color: white;
        }

        .edit-save-btn:hover {
            background: #218838;
        }

        .edit-cancel-btn {
            background: #6c757d;
            color: white;
        }

        .edit-cancel-btn:hover {
            background: #5a6268;
        }

        /* Êñ∞Â¢ûÊôÇÈñìËª∏ÂΩàÁ™ó */
        .add-timeline-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            z-index: 1001;
            max-width: 500px;
            width: 90%;
            transition: transform 0.3s ease;
        }

        .add-timeline-popup.show {
            transform: translate(-50%, -50%) scale(1);
        }

        .add-timeline-popup h3 {
            color: #764ba2;
            font-size: 1.5rem;
            margin-bottom: 20px;
            text-align: center;
        }

        .popup-input {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
            box-sizing: border-box;
        }

        .popup-input:focus {
            outline: none;
            border-color: #764ba2;
        }

        .popup-input[type="date"] {
            padding: 12px;
            color: #333;
            background: white;
        }

        .popup-input[type="date"]::-webkit-calendar-picker-indicator {
            background: #764ba2;
            border-radius: 3px;
            cursor: pointer;
            padding: 2px;
        }

        .popup-btn-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .popup-save-btn, .popup-cancel-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .popup-save-btn {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
        }

        .popup-save-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.3);
        }

        .popup-cancel-btn {
            background: #6c757d;
            color: white;
        }

        .popup-cancel-btn:hover {
            background: #5a6268;
        }

        .edit-save-btn, .edit-cancel-btn {
            padding: 6px 12px;
            margin-left: 5px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
        }

        .edit-save-btn {
            background: #28a745;
            color: white;
        }

        .edit-save-btn:hover {
            background: #218838;
        }

        .edit-cancel-btn {
            background: #6c757d;
            color: white;
        }

        .edit-cancel-btn:hover {
            background: #5a6268;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ÊÑõÊÉÖÊ∏¨Ë©¶ÈÅäÊà≤ */
        .love-game {
            text-align: center;
            margin-bottom: 30px;
        }

        .question {
            font-size: 1.2rem;
            margin-bottom: 20px;
            color: #764ba2;
        }

        .options {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .option-btn {
            background: linear-gradient(135deg, #f093fb, #f5576c);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .option-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        /* ÁïôË®ÄÊùø */
        .message-board {
            margin-top: 30px;
        }

        .message-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1rem;
            margin-bottom: 15px;
            resize: vertical;
            min-height: 80px;
        }

        .message-input:focus {
            outline: none;
            border-color: #764ba2;
        }

        .message-list {
            max-height: 400px;
            overflow-y: auto;
            margin-top: 20px;
        }

        .message-item {
            background: rgba(118, 75, 162, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            border-left: 4px solid #764ba2;
            position: relative;
            transition: all 0.3s ease;
        }

        .message-item:hover {
            background: rgba(118, 75, 162, 0.15);
            transform: translateX(5px);
        }

        .message-date {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 5px;
        }

        /* ÁïôË®ÄÂà™Èô§ÊåâÈàï */
        .message-delete-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255, 0, 0, 0.7);
            color: white;
            border: none;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            cursor: pointer;
            font-size: 12px;
            opacity: 0;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .message-item:hover .message-delete-btn {
            opacity: 1;
        }

        .message-delete-btn:hover {
            background: rgba(255, 0, 0, 1);
            transform: scale(1.1);
        }

        /* ÂõûÊÜ∂ÊñáÂ≠ó */
        .memory-text {
            text-align: center;
            margin-bottom: 40px;
        }

        .memory-text h3 {
            color: #764ba2;
            font-size: 1.8rem;
            margin-bottom: 20px;
        }

        .memory-text p {
            font-size: 1.1rem;
            line-height: 1.8;
            color: #555;
            max-width: 600px;
            margin: 0 auto;
        }

        /* ‰∫íÂãïÊåâÈàï */
        .interactive-section {
            text-align: center;
            margin-bottom: 40px;
        }

        .special-btn {
            background: linear-gradient(135deg, #f093fb, #f5576c);
            color: white;
            padding: 20px 40px;
            border: none;
            border-radius: 50px;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            margin: 10px;
        }

        .special-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        /* ÈÄ≤Â∫¶Ê¢ù */
        .love-progress {
            margin: 20px 0;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: #ddd;
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            width: 0%;
            transition: width 2s ease;
            border-radius: 10px;
        }

        .progress-text {
            text-align: center;
            margin-top: 10px;
            font-weight: bold;
            color: #764ba2;
        }

        /* Ë®äÊÅØÂΩàÁ™ó */
        .message-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            z-index: 1000;
            text-align: center;
            max-width: 500px;
            width: 90%;
            transition: transform 0.3s ease;
        }

        .message-popup.show {
            transform: translate(-50%, -50%) scale(1);
        }

        .message-popup h3 {
            color: #764ba2;
            font-size: 2rem;
            margin-bottom: 20px;
        }

        .message-popup p {
            font-size: 1.1rem;
            color: #555;
            line-height: 1.8;
        }

        .close-btn {
            background: #764ba2;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            margin-top: 20px;
            transition: background 0.3s ease;
        }

        .close-btn:hover {
            background: #667eea;
        }

        /* ÈÅÆÁΩ©Â±§ */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 999;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .overlay.show {
            opacity: 1;
            visibility: visible;
        }

        /* ÂãïÁï´ÊïàÊûú */
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Êñ∞Â¢ûÊôÇÈñìËª∏È†ÖÁõÆÊåâÈàï */
        .add-timeline-btn {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            margin: 20px auto;
            display: block;
        }

        .add-timeline-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        .sort-timeline-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            margin: 20px 10px;
            display: inline-block;
        }

        .sort-timeline-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }

/* ÈüøÊáâÂºèË®≠Ë®à - ÂÑ™ÂåñÁâàÊú¨ */
@media (max-width: 768px) {
    .header h1 {
        font-size: 2rem;
    }
    
    .time-display {
        gap: 10px;
    }
    
    .time-unit {
        min-width: 60px;
        padding: 15px;
    }
    
    .special-btn {
        padding: 15px 30px;
        font-size: 1rem;
    }
    
    /* --- ÊôÇÈñìËª∏ÂÑ™ÂåñÈñãÂßã --- */
    
    /* 1. Â∞áÂûÇÁõ¥Á∑öÁßªÂà∞Â∑¶ÂÅ¥Âõ∫ÂÆö‰ΩçÁΩÆ */
    .timeline::after {
        left: 31px; /* ÂûÇÁõ¥Á∑öË∑ùÈõ¢Â∑¶ÈÇä 31px */
    }
    
    /* 2. Áµ±‰∏ÄËôïÁêÜÊâÄÊúâÊôÇÈñìËª∏È†ÖÁõÆÔºå‰∏çÂÜçÂçÄÂàÜÂ•áÂÅ∂ */
    .timeline-item,
    .timeline-item:nth-child(odd),
    .timeline-item:nth-child(even) {
        width: 100%;        /* ÂØ¨Â∫¶‰ΩîÊªø */
        left: 0;            /* ÂæûÊúÄÂ∑¶ÈÇäÈñãÂßãÊéíÂàó */
        transform: none;    /* Ê∏ÖÈô§ÊâÄÊúâ‰ΩçÁßªÊïàÊûú */
        padding-left: 70px; /* Â∑¶ÈÇäÁïôÂá∫Á©∫ÈñìÁµ¶ÊôÇÈñìÈªûÂíåÁ∑ö */
        padding-right: 25px;/* Âè≥ÈÇä‰øùÁïô‰∏Ä‰∫õÈñìË∑ù */
    }
    
    /* 3. Á≤æÊ∫ñÂÆö‰ΩçÊôÇÈñìÈªûÁöÑÂúìÂúàÔºå‰ΩøÂÖ∂‰∏≠ÂøÉËàáÂûÇÁõ¥Á∑öÁöÑ‰∏≠ÂøÉÂÆåÁæéÂ∞çÈΩä */
    .timeline-item::after {
        /*
         * Ë®àÁÆóÊñπÂºè:
         * ÂûÇÁõ¥Á∑öÁöÑ left (31px) - ÂûÇÁõ¥Á∑öÂØ¨Â∫¶‰∏ÄÂçä (6px/2) = ÂûÇÁõ¥Á∑ö‰∏≠ÂøÉ (28px)
         * ÊàëÂÄëË¶ÅËÆìÂúìÈªûÁöÑ‰∏≠ÂøÉ‰πüÂ∞çÈΩäÂú® 28px ÁöÑ‰ΩçÁΩÆ
         * ÊâÄ‰ª•ÂúìÈªûÁöÑ left = ÂûÇÁõ¥Á∑ö‰∏≠ÂøÉ (28px) - ÂúìÈªûÂØ¨Â∫¶‰∏ÄÂçä (25px/2) = 15.5px
         * ÈÄôË£°‰ΩøÁî® 16px ÊïàÊûúÊúÄÂ•Ω
         */
        left: 16px; 
    }
    
    /* --- ÊôÇÈñìËª∏ÂÑ™ÂåñÁµêÊùü --- */
}
    </style>
</head>
<body>
    <!-- ÊòüÁ©∫ËÉåÊôØ -->
    <div class="stars" id="stars"></div>
    
    <!-- ÊµÆÂãïÊÑõÂøÉ -->
    <div class="floating-hearts" id="floatingHearts"></div>
    
    <!-- ÁÖôÁÅ´ÊïàÊûú -->
    <div class="fireworks" id="fireworks"></div>
    
    <!-- Èü≥Ê®ÇÊéßÂà∂Âô® -->
    <div class="music-control" id="musicControl" onclick="toggleMusic()">
        <span id="musicIcon">üéµ</span>
        <span id="musicText">Êí≠ÊîæÈü≥Ê®Ç</span>
        <div class="music-visualizer">
            <div class="music-bar"></div>
            <div class="music-bar"></div>
            <div class="music-bar"></div>
            <div class="music-bar"></div>
        </div>
    </div>
    
    <!-- Èü≥ÈáèÊéßÂà∂Âô® -->
    <div class="volume-control" id="volumeControl">
        <span>üîä</span>
        <input type="range" class="volume-slider" id="volumeSlider" min="0" max="100" value="50">
        <span id="volumeValue">50%</span>
    </div>
    
    <!-- Èö±ËóèÁöÑÈü≥Ê®ÇÊí≠ÊîæÂô® -->
    <audio id="backgroundMusic" loop>
        <source src="let me take of you.mp3" type="audio/mpeg">
        <source src="let me take of you.ogg" type="audio/ogg">
        ÊÇ®ÁöÑÁÄèË¶ΩÂô®‰∏çÊîØÊè¥Èü≥Ê®ÇÊí≠ÊîæÂäüËÉΩ
    </audio>

    <div class="container">
        <!-- Ê®ôÈ°åÂçÄÂüü -->
        <div class="header">
            <h1>ÊàëÂÄëÁöÑÊÑõÊÉÖÊïÖ‰∫ã üíï</h1>
            <p>Ë®òÈåÑÊØè‰∏ÄÂÄãÁæéÂ•ΩÊôÇÂàªÔºåË¶ãË≠âÊàëÂÄëÁöÑÊÑõÊÉÖ</p>
        </div>

        <!-- Âú®‰∏ÄËµ∑ÁöÑÊôÇÈñìË®àÊï∏Âô® -->
        <div class="card">
            <div class="counter">
                <h2>ÊàëÂÄëÂú®‰∏ÄËµ∑Â∑≤Á∂ì...</h2>
                <div class="time-display" id="timeDisplay">
                    <div class="time-unit">
                        <span class="number" id="days">0</span>
                        <span class="label">Â§©</span>
                    </div>
                    <div class="time-unit">
                        <span class="number" id="hours">0</span>
                        <span class="label">Â∞èÊôÇ</span>
                    </div>
                    <div class="time-unit">
                        <span class="number" id="minutes">0</span>
                        <span class="label">ÂàÜÈêò</span>
                    </div>
                    <div class="time-unit">
                        <span class="number" id="seconds">0</span>
                        <span class="label">Áßí</span>
                    </div>
                </div>
                
                <!-- ÊÑõÊÉÖÈÄ≤Â∫¶Ê¢ù -->
                <div class="love-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <div class="progress-text" id="progressText">ÊÑõÊÉÖÊøÉÂ∫¶ÔºöËºâÂÖ•‰∏≠...</div>
                </div>
            </div>
        </div>

        <!-- ÊÑõÊÉÖÊ∏¨Ë©¶ÈÅäÊà≤ -->
        <div class="card">
            <div class="love-game">
                <h3 style="color: #764ba2; margin-bottom: 20px;">üíï ÊÑõÊÉÖÂ∞èÊ∏¨È©ó</h3>
                <div class="question" id="gameQuestion">‰Ω†ÊúÄÂñúÊ≠°ÊàëÂÄë‰∏ÄËµ∑ÂÅöÁöÑ‰∫ãÊÉÖÊòØ‰ªÄÈ∫ºÔºü</div>
                <div class="options">
                    <button class="option-btn" onclick="answerQuestion(1)">‰∏ÄËµ∑ÁúãÈõªÂΩ±</button>
                    <button class="option-btn" onclick="answerQuestion(2)">‰∏ÄËµ∑Êï£Ê≠•</button>
                    <button class="option-btn" onclick="answerQuestion(3)">‰∏ÄËµ∑ÂêÉÈ£Ø</button>
                    <button class="option-btn" onclick="answerQuestion(4)">‰∏ÄËµ∑ÊóÖË°å</button>
                </div>
                <div id="gameResult" style="margin-top: 20px; font-weight: bold; color: #764ba2;"></div>
            </div>
        </div>

        <!-- ÂõûÊÜ∂ÊôÇÈñìËª∏ - Â¢ûÂº∑Áâà -->
        <div class="card">
            <h3 style="color: #764ba2; text-align: center; margin-bottom: 30px;">üìÖ ÊàëÂÄëÁöÑÂõûÊÜ∂ÊôÇÈñìËª∏</h3>
            <div style="text-align: center; margin-bottom: 20px;">
                <button class="add-timeline-btn" onclick="addNewTimelineItem()">‚ûï Êñ∞Â¢ûÁæéÂ•ΩÂõûÊÜ∂</button>
                <button class="sort-timeline-btn" onclick="manualSortTimeline()">üìÖ ÈáçÊñ∞ÊéíÂ∫è</button>
            </div>
            <div class="timeline" id="timeline">
                <!-- ÊôÇÈñìËª∏È†ÖÁõÆÂ∞áÂú® JavaScript ‰∏≠ÂãïÊÖãÁîüÊàê‰∏¶ÊéíÂ∫è -->
            </div>
        </div>

        <!-- ÁÖßÁâá‰∏äÂÇ≥ÂçÄÂüü -->
        <div class="card">
            <div class="photo-upload">
                <h3 style="color: #764ba2; margin-bottom: 20px;">üì∏ ‰∏äÂÇ≥ÊàëÂÄëÁöÑÂõûÊÜ∂ÁÖßÁâá</h3>
                <input type="file" id="photoInput" accept="image/*" multiple style="display: none;">
                <button class="upload-btn" onclick="document.getElementById('photoInput').click()">
                    üì∏ ÈÅ∏ÊìáÁÖßÁâá
                </button>
            </div>
            
            <div class="photo-gallery" id="photoGallery">
                <!-- Á§∫‰æãÁÖßÁâá -->
                <div class="photo-item" id="sample_photo">
                    <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjZjNmNGY2Ii8+CjxwYXRoIGQ9Ik0xMDAgNTBMNzUgMTAwSDEyNUwxMDAgNTBaIiBmaWxsPSIjZGRkZGRkIi8+CjxjaXJjbGUgY3g9IjEwMCIgY3k9IjEwMCIgcj0iMzAiIGZpbGw9IiNkZGRkZGQiLz4KPHR3eHQgeD0iMTAwIiB5PSIxNzAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9IiM5OTk5OTkiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCI+5oiR5YCR55qE54Wn54mHPC90ZXh0Pgo8L3N2Zz4K" alt="ÊàëÂÄëÁöÑÁÖßÁâá">
                    <div class="photo-controls">
                        <button class="photo-control-btn edit-btn" onclick="editCaption('sample_photo')" title="Á∑®ËºØÊ®ôÈ°å">‚úèÔ∏è</button>
                        <button class="photo-control-btn" onclick="deletePhoto('sample_photo')" title="Âà™Èô§ÁÖßÁâá">üóëÔ∏è</button>
                    </div>
                    <div class="caption">
                        <span class="caption-text">ÊàëÂÄëÁöÑÁ¨¨‰∏ÄÂºµÂêàÁÖß</span>
                        <input class="caption-input" style="display: none;" onblur="saveCaptionEdit('sample_photo')" onkeypress="handleCaptionKeypress(event, 'sample_photo')">
                    </div>
                </div>
            </div>
        </div>

        <!-- ÁïôË®ÄÊùø - Â¢ûÂº∑Áâà -->
        <div class="card">
            <h3 style="color: #764ba2; margin-bottom: 20px;">üíå ÊÑõÁöÑÁïôË®ÄÊùø</h3>
            <div class="message-board">
                <textarea class="message-input" id="messageInput" placeholder="ÂØ´‰∏ã‰Ω†ÊÉ≥Â∞çÂ•πË™™ÁöÑË©±..."></textarea>
                <button class="upload-btn" onclick="addLoveMessage()">üíï ÁôºÈÄÅÊÑõÊÑè</button>
                <div class="message-list" id="messageList">
                    <!-- Á§∫‰æãÁïôË®Ä -->
                    <div class="message-item" data-id="msg_sample">
                        <button class="message-delete-btn" onclick="deleteMessage('msg_sample')" title="Âà™Èô§ÁïôË®Ä">üóëÔ∏è</button>
                        <div class="message-date">2025Âπ¥7Êúà10Êó• 14:30</div>
                        <div>Ë¶™ÊÑõÁöÑÔºåÊÑüË¨ù‰Ω†Èô™‰º¥ÊàëÂ∫¶ÈÅéÊØè‰∏ÄÂÄãÁæéÂ•ΩÁöÑÊôÇÂÖâ„ÄÇ‰Ω†ÊòØÊàëÁîüÂëΩ‰∏≠ÊúÄÁèçË≤¥ÁöÑÁ¶ÆÁâ©ÔºÅüíï</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ÂõûÊÜ∂ÊñáÂ≠ó -->
        <div class="card">
            <div class="memory-text">
                <h3>ÊàëÂÄëÁöÑÊÑõÊÉÖÊïÖ‰∫ã</h3>
                <p>ÂæûÁ¨¨‰∏ÄÊ¨°Áõ∏ÈÅáÂà∞ÁèæÂú®ÔºåÊØè‰∏ÄÂÄãÊó•Â≠êÈÉΩÂÖÖÊªø‰∫ÜÊÑõËàáÊ∫´Êöñ„ÄÇ‰Ω†ÊòØÊàëÁîüÂëΩ‰∏≠ÊúÄÁæéÂ•ΩÁöÑÁ¶ÆÁâ©ÔºåÊÑüË¨ù‰Ω†Èô™‰º¥ÊàëËµ∞ÈÅéÁöÑÊØè‰∏ÄÂ§©„ÄÇÊú™‰æÜÁöÑË∑ØÈÇÑÂæàÈï∑Ôºå‰ΩÜÊúâ‰Ω†Âú®Ë∫´ÈÇäÔºåÊàë‰ªÄÈ∫ºÈÉΩ‰∏çÊÄï„ÄÇ</p>
            </div>
        </div>

        <!-- Êï∏ÊìöÁÆ°ÁêÜÂçÄÂüü -->
        <div class="card">
            <h3 style="color: #764ba2; margin-bottom: 20px;">üíæ Êô∫ËÉΩÊï∏ÊìöÁÆ°ÁêÜ</h3>
            <div style="text-align: center; margin-bottom: 20px;">
                <p style="color: #666; margin-bottom: 20px;">‰ΩøÁî®ÁÄèË¶ΩÂô®Êô∫ËÉΩÂ≠òÂÑ≤ÔºåËá™Âãï‰øùÂ≠òÊâÄÊúâÂõûÊÜ∂ÔºåÊîØÊè¥ÂÇô‰ªΩÂíåÂêåÊ≠•</p>
                
                <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap; margin-bottom: 20px;">
                    <button class="upload-btn" onclick="showLocalStatus()">
                        üìä Êü•ÁúãÊï∏ÊìöÁãÄÊÖã
                    </button>
                    <button class="upload-btn" onclick="exportMemories()">
                        üíæ Â∞éÂá∫ÂÆåÊï¥ÂÇô‰ªΩ
                    </button>
                    <button class="upload-btn" onclick="document.getElementById('importInput').click()">
                        üìÇ Â∞éÂÖ•ÂÇô‰ªΩ
                    </button>
                    <button class="upload-btn" onclick="generateGoogleSheetsData()">
                        üìã ÁîüÊàê Google Sheets Êï∏Êìö
                    </button>
                </div>
                
                <input type="file" id="importInput" accept=".json" style="display: none;" onchange="importMemories(event)">
                
                <div style="margin-top: 15px; font-size: 0.9rem; color: #888;">
                    <p>üí° <strong>Êô∫ËÉΩÊú¨Âú∞Â≠òÂÑ≤Ôºö</strong></p>
                    <p>üîÑ Ëá™Âãï‰øùÂ≠òÔºöÊØèÊ¨°Êìç‰ΩúÈÉΩËá™Âãï‰øùÂ≠òÂà∞ÁÄèË¶ΩÂô®</p>
                    <p>üíæ ÂÆöÊúüÂÇô‰ªΩÔºöÂª∫Ë≠∞ÊØèÊúàÂ∞éÂá∫‰∏ÄÊ¨°ÂÇô‰ªΩÊ™îÊ°à</p>
                    <p>üìã Google SheetsÔºöÂèØÁîüÊàêÊï∏ÊìöÁõ¥Êé•Ë§áË£ΩÂà∞ Google Sheets</p>
                    <p>üì± Ë∑®Ë£ùÁΩÆÂêåÊ≠•Ôºö‰ΩøÁî®Â∞éÂá∫/Â∞éÂÖ•ÂäüËÉΩÂú®‰∏çÂêåË£ùÁΩÆÈñìÂêåÊ≠•</p>
                </div>
            </div>
        </div>

        <!-- ‰∫íÂãïÊåâÈàï -->
        <div class="card">
            <div class="interactive-section">
                <h3 style="color: #764ba2; margin-bottom: 30px;">üéÅ ÁâπÂà•ÁöÑÂ∞èÈ©öÂñú</h3>
                <button class="special-btn" onclick="showMessage('love')">üíï ÊÑõÁöÑÂëäÁôΩ</button>
                <button class="special-btn" onclick="showMessage('promise')">ü§ù ÊàëÁöÑÊâøË´æ</button>
                <button class="special-btn" onclick="showMessage('future')">üåü Êú™‰æÜÁöÑÂ§¢ÊÉ≥</button>
                <button class="special-btn" onclick="createFireworks()">üéÜ ÊîæÁÖôÁÅ´</button>
                <button class="special-btn" onclick="generatePoem()">üìù ÊÑõÊÉÖË©©Ê≠å</button>
            </div>
        </div>
    </div>

    <!-- Êñ∞Â¢ûÊôÇÈñìËª∏ÂΩàÁ™ó -->
    <div class="overlay" id="addTimelineOverlay" onclick="hideAddTimelinePopup()" style="z-index: 1000;"></div>
    <div class="add-timeline-popup" id="addTimelinePopup">
        <h3>üìÖ Êñ∞Â¢ûÁæéÂ•ΩÂõûÊÜ∂</h3>
        <input type="text" class="popup-input" id="newTimelineTitle" placeholder="ÂõûÊÜ∂Ê®ôÈ°åÔºà‰æãÂ¶ÇÔºöÁ¨¨‰∏ÄÊ¨°Ë¶ãÈù¢Ôºâ">
        <textarea class="popup-input" id="newTimelineContent" placeholder="ÂõûÊÜ∂ÂÖßÂÆπÊèèËø∞..." rows="4"></textarea>
        <input type="date" class="popup-input" id="newTimelineDate">
        <div style="text-align: center; font-size: 12px; color: #666; margin: 10px 0;">
            ‚å®Ô∏è Âø´Êç∑ÈçµÔºöCtrl+Enter ‰øùÂ≠òÔºåEscape ÂèñÊ∂à
        </div>
        <div class="popup-btn-group">
            <button class="popup-save-btn" onclick="saveNewTimelineItem()">üíï ‰øùÂ≠òÂõûÊÜ∂</button>
            <button class="popup-cancel-btn" onclick="hideAddTimelinePopup()">‚ùå ÂèñÊ∂à</button>
        </div>
    </div>

    <!-- Ë®äÊÅØÂΩàÁ™ó -->
    <div class="overlay" id="overlay" onclick="hideMessage()"></div>
    <div class="message-popup" id="messagePopup">
        <h3 id="messageTitle"></h3>
        <p id="messageContent"></p>
        <button class="close-btn" onclick="hideMessage()">ÈóúÈñâ</button>
    </div>

    <script>
        // Âú®‰∏ÄËµ∑ÁöÑÊó•Êúü (Ë´ã‰øÆÊîπÁÇ∫‰Ω†ÂÄëÁöÑÁ¥ÄÂøµÊó•)
        const anniversaryDate = new Date('2023-07-12');
        
        // ÊÑõÊÉÖÊ∏¨Ë©¶È°åÁõÆ
        const loveQuestions = [
            {
                question: "‰Ω†ÊúÄÂñúÊ≠°ÊàëÂÄë‰∏ÄËµ∑ÂÅöÁöÑ‰∫ãÊÉÖÊòØ‰ªÄÈ∫ºÔºü",
                options: ["‰∏ÄËµ∑ÁúãÈõªÂΩ±", "‰∏ÄËµ∑Êï£Ê≠•", "‰∏ÄËµ∑ÂêÉÈ£Ø", "‰∏ÄËµ∑ÊóÖË°å"],
                answers: ["ÁúãÈõªÂΩ±ËÆìÊàëÂÄëÊõ¥Ë¶™ËøëÔºÅ", "Êï£Ê≠•ÊôÇÂÖâÊúÄÊµ™Êº´ÔºÅ", "‰∏ÄËµ∑ÂêÉÈ£ØÊúÄÂπ∏Á¶èÔºÅ", "ÊóÖË°åËÆìÊàëÂÄëÊõ¥‰∫ÜËß£ÂΩºÊ≠§ÔºÅ"]
            },
            {
                question: "‰Ω†Ë™çÁÇ∫ÊàëÂÄëÁöÑÊÑõÊÉÖÂÉè‰ªÄÈ∫ºÔºü",
                options: ["Ê∫´ÊöñÁöÑÈôΩÂÖâ", "Êµ™Êº´ÁöÑÊúà‰∫Æ", "Áá¶ÁàõÁöÑÊòüÊòü", "ÁæéÈ∫óÁöÑÂΩ©Ëôπ"],
                answers: ["ÈôΩÂÖâËà¨Ê∫´ÊöñÁöÑÊÑõÔºÅ", "Êúà‰∫ÆËà¨Êµ™Êº´ÁöÑÊÑõÔºÅ", "ÊòüÊòüËà¨ÈñÉËÄÄÁöÑÊÑõÔºÅ", "ÂΩ©ËôπËà¨ÁæéÈ∫óÁöÑÊÑõÔºÅ"]
            },
            {
                question: "Â¶ÇÊûúÂèØ‰ª•ÂõûÂà∞ÈÅéÂéªÔºå‰Ω†ÊúÄÊÉ≥ÈáçÊñ∞È´îÈ©óÂì™‰∏ÄÂàªÔºü",
                options: ["Á¨¨‰∏ÄÊ¨°Ë¶ãÈù¢", "Á¨¨‰∏ÄÊ¨°Á¥ÑÊúÉ", "Á¨¨‰∏ÄÊ¨°ÁâΩÊâã", "Á¨¨‰∏ÄÊ¨°Ë™™ÊÑõ‰Ω†"],
                answers: ["ÈÇ£ÂÄãÂàùÈÅáÁöÑÁæéÂ•ΩÔºÅ", "Á∑äÂºµÂèàÁîúËúúÁöÑÁ¨¨‰∏ÄÊ¨°Á¥ÑÊúÉÔºÅ", "ÁâΩÊâãÁû¨ÈñìÁöÑÊÇ∏ÂãïÔºÅ", "Ë™™ÊÑõ‰Ω†ÁöÑÂãáÊ∞£ÔºÅ"]
            }
        ];
        
        let currentQuestion = 0;
        let musicPlaying = false;
        let showVolumeControl = false;
        
        // ÂÖ®ÂüüÂõûÊÜ∂Êï∏ÊìöÁµêÊßã
        let memoriesData = {
            timeline: [],
            messages: [],
            photos: [],
            anniversaryDate: '2023-01-01',
            lastUpdated: new Date().toISOString(),
            syncEnabled: false
        };
        
        // ÊôÇÈñìËª∏Áõ∏ÈóúËÆäÊï∏
        let timelineCounter = 5; // ‰∏ã‰∏ÄÂÄãÊñ∞È†ÖÁõÆÁöÑIDÁ∑®Ëôü
        
        // ÂàùÂßãÂåñÈü≥Ê®ÇÊéßÂà∂
        function initMusicControl() {
            const audio = document.getElementById('backgroundMusic');
            const volumeSlider = document.getElementById('volumeSlider');
            const volumeValue = document.getElementById('volumeValue');
            const musicControl = document.getElementById('musicControl');
            
            // Ë®≠ÁΩÆÂàùÂßãÈü≥Èáè
            audio.volume = 0.5;
            
            // Èü≥ÈáèÊéßÂà∂
            volumeSlider.addEventListener('input', function() {
                audio.volume = this.value / 100;
                volumeValue.textContent = this.value + '%';
            });
            
            // Âè≥ÈçµÈªûÊìäÈü≥Ê®ÇÊéßÂà∂Âô®È°ØÁ§∫/Èö±ËóèÈü≥ÈáèÊéßÂà∂
            musicControl.addEventListener('contextmenu', function(e) {
                e.preventDefault();
                toggleVolumeControl();
            });
            
            // Èü≥Ê®ÇÊí≠Êîæ‰∫ã‰ª∂Áõ£ËÅΩ
            audio.addEventListener('play', function() {
                updateMusicStatus(true);
            });
            
            audio.addEventListener('pause', function() {
                updateMusicStatus(false);
            });
            
            audio.addEventListener('ended', function() {
                updateMusicStatus(false);
            });
            
            // Ê™¢Ê∏¨Èü≥Ê®ÇÂä†ËºâÈåØË™§
            audio.addEventListener('error', function() {
                console.log('Èü≥Ê®ÇÂä†ËºâÂ§±ÊïóÔºåÊ™îÊ°àÂèØËÉΩ‰∏çÂ≠òÂú®');
            });
            
            // Ê™¢Ê∏¨Èü≥Ê®ÇÂä†ËºâÊàêÂäü
            audio.addEventListener('loadeddata', function() {
                console.log('Èü≥Ê®ÇÊ™îÊ°à "let me take of you.mp3" Â∑≤ÊàêÂäüÂä†ËºâÔºÅ');
            });
            
            audio.addEventListener('canplay', function() {
                console.log('Èü≥Ê®ÇÂèØ‰ª•Êí≠ÊîæÔºåÈï∑Â∫¶:', Math.round(audio.duration), 'Áßí');
            });
        }
        
        // Êõ¥Êñ∞Èü≥Ê®ÇÊí≠ÊîæÁãÄÊÖã
        function updateMusicStatus(playing) {
            const musicControl = document.getElementById('musicControl');
            const musicIcon = document.getElementById('musicIcon');
            const musicText = document.getElementById('musicText');
            
            musicPlaying = playing;
            
            if (playing) {
                musicControl.classList.add('playing');
                musicIcon.textContent = 'üéµ';
                musicText.textContent = 'Êö´ÂÅúÈü≥Ê®Ç';
                console.log('‚ô™ Èü≥Ê®ÇÊ≠£Âú®Êí≠Êîæ‰∏≠... ‚ô™');
            } else {
                musicControl.classList.remove('playing');
                musicIcon.textContent = 'üéµ';
                musicText.textContent = 'Êí≠ÊîæÈü≥Ê®Ç';
                console.log('Èü≥Ê®ÇÂ∑≤Êö´ÂÅú');
            }
        }
        
        // ÂàáÊèõÈü≥ÈáèÊéßÂà∂È°ØÁ§∫
        function toggleVolumeControl() {
            const volumeControl = document.getElementById('volumeControl');
            showVolumeControl = !showVolumeControl;
            
            if (showVolumeControl) {
                volumeControl.classList.add('show');
                console.log('Èü≥ÈáèÊéßÂà∂Â∑≤È°ØÁ§∫ÔºåÁï∂ÂâçÈü≥Èáè:', document.getElementById('volumeSlider').value + '%');
            } else {
                volumeControl.classList.remove('show');
            }
        }
        
        // ÂâµÂª∫ÊòüÁ©∫ËÉåÊôØ
        function createStars() {
            const starsContainer = document.getElementById('stars');
            for (let i = 0; i < 100; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 2 + 's';
                starsContainer.appendChild(star);
            }
        }
        
        // Êõ¥Êñ∞ÊôÇÈñìË®àÊï∏Âô®
        function updateCounter() {
            const now = new Date();
            const difference = now - anniversaryDate;
            
            const days = Math.floor(difference / (1000 * 60 * 60 * 24));
            const hours = Math.floor((difference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((difference % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((difference % (1000 * 60)) / 1000);
            
            document.getElementById('days').textContent = days;
            document.getElementById('hours').textContent = hours;
            document.getElementById('minutes').textContent = minutes;
            document.getElementById('seconds').textContent = seconds;
            
            // Êõ¥Êñ∞ÊÑõÊÉÖÈÄ≤Â∫¶Ê¢ù
            const lovePercentage = Math.min((days / 365) * 100, 100);
            document.getElementById('progressFill').style.width = lovePercentage + '%';
            document.getElementById('progressText').textContent = `ÊÑõÊÉÖÊøÉÂ∫¶Ôºö${lovePercentage.toFixed(1)}%`;
        }

        // Èü≥Ê®ÇÊéßÂà∂
        function toggleMusic() {
            const audio = document.getElementById('backgroundMusic');
            
            console.log('üéµ ÈªûÊìäÈü≥Ê®ÇÊåâÈàïÔºåÁï∂ÂâçÁãÄÊÖã:', musicPlaying);
            
            if (musicPlaying) {
                audio.pause();
                console.log('‚è∏Ô∏è ÂòóË©¶Êö´ÂÅúÈü≥Ê®Ç');
            } else {
                console.log('‚ñ∂Ô∏è ÂòóË©¶Êí≠ÊîæÈü≥Ê®Ç "let me take of you.mp3"');
                
                const playPromise = audio.play();
                
                if (playPromise !== undefined) {
                    playPromise.then(() => {
                        console.log('‚úÖ Èü≥Ê®ÇÊí≠ÊîæÊàêÂäüÔºÅ');
                    }).catch((error) => {
                        console.log('‚ùå Èü≥Ê®ÇÊí≠ÊîæÂ§±ÊïóÔºö', error);
                        
                        let errorMessage = 'ÁÑ°Ê≥ïÊí≠Êîæ "let me take of you.mp3"„ÄÇ\n\nÂèØËÉΩÁöÑÂéüÂõ†Ôºö\n';
                        errorMessage += '1. Ê™îÊ°àÂêçÁ®±‰∏çÊ≠£Á¢∫ÔºàÊ™¢Êü•ÊòØÂê¶ÁÇ∫ "let me take of you.mp3"Ôºâ\n';
                        errorMessage += '2. Ê™îÊ°à‰∏çÂú®HTMLÊ™îÊ°àÁöÑÂêå‰∏ÄÂÄãË≥áÊñôÂ§æ\n';
                        errorMessage += '3. Ê™îÊ°àÊ†ºÂºèÂïèÈ°å\n';
                        errorMessage += '4. ÁÄèË¶ΩÂô®ÈôêÂà∂\n\n';
                        errorMessage += 'Ë´ãÁ¢∫Ë™çÊ™îÊ°àÂ≠òÂú®‰∏îË∑ØÂæëÊ≠£Á¢∫„ÄÇ';
                        
                        alert(errorMessage);
                        updateMusicStatus(false);
                    });
                }
            }
        }
        
        // ÊÑõÊÉÖÊ∏¨Ë©¶ÈÅäÊà≤
        function answerQuestion(answerIndex) {
            const result = loveQuestions[currentQuestion].answers[answerIndex - 1];
            document.getElementById('gameResult').textContent = result;
            
            setTimeout(() => {
                currentQuestion = (currentQuestion + 1) % loveQuestions.length;
                const newQuestion = loveQuestions[currentQuestion];
                document.getElementById('gameQuestion').textContent = newQuestion.question;
                
                const optionButtons = document.querySelectorAll('.option-btn');
                optionButtons.forEach((btn, index) => {
                    btn.textContent = newQuestion.options[index];
                });
                
                document.getElementById('gameResult').textContent = '';
            }, 2000);
        }

        // ÁÖßÁâá‰∏äÂÇ≥ÂäüËÉΩ
        document.getElementById('photoInput').addEventListener('change', function(e) {
            const files = e.target.files;
            const gallery = document.getElementById('photoGallery');
            
            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    const photoItem = document.createElement('div');
                    photoItem.className = 'photo-item';
                    const photoId = 'photo_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
                    photoItem.id = photoId;
                    photoItem.innerHTML = `
                        <img src="${e.target.result}" alt="‰∏äÂÇ≥ÁöÑÁÖßÁâá">
                        <div class="photo-controls">
                            <button class="photo-control-btn edit-btn" onclick="editCaption('${photoId}')" title="Á∑®ËºØÊ®ôÈ°å">‚úèÔ∏è</button>
                            <button class="photo-control-btn" onclick="deletePhoto('${photoId}')" title="Âà™Èô§ÁÖßÁâá">üóëÔ∏è</button>
                        </div>
                        <div class="caption">
                            <span class="caption-text">ÊàëÂÄëÁöÑÂõûÊÜ∂ ${new Date().toLocaleDateString()}</span>
                            <input class="caption-input" style="display: none;" onblur="saveCaptionEdit('${photoId}')" onkeypress="handleCaptionKeypress(event, '${photoId}')">
                        </div>
                    `;
                    gallery.appendChild(photoItem);
                    console.log('üì∏ Êñ∞Â¢ûÁÖßÁâá:', photoId);
                };
                
                reader.readAsDataURL(file);
            }
        });

        // Âà™Èô§ÁÖßÁâáÂäüËÉΩ
        window.deletePhoto = function(photoId) {
            console.log('üóëÔ∏è Âà™Èô§ÁÖßÁâáË¢´ÈªûÊìä:', photoId);
            if (confirm('Á¢∫ÂÆöË¶ÅÂà™Èô§ÈÄôÂºµÁÖßÁâáÂóéÔºü')) {
                const photoElement = document.getElementById(photoId);
                if (photoElement) {
                    photoElement.style.transition = 'all 0.3s ease';
                    photoElement.style.transform = 'scale(0)';
                    photoElement.style.opacity = '0';
                    setTimeout(() => {
                        photoElement.remove();
                        console.log('‚úÖ ÁÖßÁâáÂ∑≤Âà™Èô§:', photoId);
                    }, 300);
                } else {
                    console.log('‚ùå Êâæ‰∏çÂà∞ÁÖßÁâáÂÖÉÁ¥†:', photoId);
                }
            }
        };

        // Á∑®ËºØÁÖßÁâáÊ®ôÈ°åÂäüËÉΩ
        window.editCaption = function(photoId) {
            console.log('‚úèÔ∏è Á∑®ËºØÊ®ôÈ°åË¢´ÈªûÊìä:', photoId);
            const photoElement = document.getElementById(photoId);
            if (photoElement) {
                const captionText = photoElement.querySelector('.caption-text');
                const captionInput = photoElement.querySelector('.caption-input');
                
                if (captionText && captionInput) {
                    captionInput.value = captionText.textContent;
                    captionText.style.display = 'none';
                    captionInput.style.display = 'inline';
                    captionInput.focus();
                    captionInput.select();
                    console.log('üìù ÈÄ≤ÂÖ•Á∑®ËºØÊ®°Âºè');
                }
            }
        };

        // ‰øùÂ≠òÁ∑®ËºØÁöÑÊ®ôÈ°å
        window.saveCaptionEdit = function(photoId) {
            const photoElement = document.getElementById(photoId);
            if (photoElement) {
                const captionText = photoElement.querySelector('.caption-text');
                const captionInput = photoElement.querySelector('.caption-input');
                
                if (captionText && captionInput) {
                    if (captionInput.value.trim()) {
                        captionText.textContent = captionInput.value.trim();
                        console.log('üíæ Ê®ôÈ°åÂ∑≤‰øùÂ≠ò:', captionInput.value.trim());
                    }
                    
                    captionText.style.display = 'inline';
                    captionInput.style.display = 'none';
                }
            }
        };

        // ËôïÁêÜÊ®ôÈ°åÁ∑®ËºØÊôÇÁöÑÊåâÈçµ‰∫ã‰ª∂
        window.handleCaptionKeypress = function(event, photoId) {
            if (event.key === 'Enter') {
                saveCaptionEdit(photoId);
            } else if (event.key === 'Escape') {
                const photoElement = document.getElementById(photoId);
                if (photoElement) {
                    const captionText = photoElement.querySelector('.caption-text');
                    const captionInput = photoElement.querySelector('.caption-input');
                    
                    if (captionText && captionInput) {
                        captionText.style.display = 'inline';
                        captionInput.style.display = 'none';
                        console.log('üö´ ÂèñÊ∂àÁ∑®ËºØ');
                    }
                }
            }
        };

        // === ÊôÇÈñìËª∏ÊéíÂ∫èÂíåÊ∏≤ÊüìÂäüËÉΩ ===
        
        // Ëß£ÊûêÊó•ÊúüÂáΩÊï∏
        function parseTimelineDate(dateStr) {
            if (!dateStr) return new Date();
            
            // Â¶ÇÊûúÊòØ ISO Ê†ºÂºè (YYYY-MM-DD)
            if (dateStr.match(/^\d{4}-\d{2}-\d{2}$/)) {
                return new Date(dateStr);
            }
            
            // Â¶ÇÊûúÊòØ‰∏≠ÊñáÊ†ºÂºè (2023Âπ¥1Êúà1Êó•)
            if (dateStr.includes('Âπ¥')) {
                const yearMatch = dateStr.match(/(\d{4})Âπ¥/);
                const monthMatch = dateStr.match(/(\d{1,2})Êúà/);
                const dayMatch = dateStr.match(/(\d{1,2})Êó•/);
                
                if (yearMatch && monthMatch && dayMatch) {
                    const year = parseInt(yearMatch[1]);
                    const month = parseInt(monthMatch[1]) - 1; // JS Êúà‰ªΩÂæû 0 ÈñãÂßã
                    const day = parseInt(dayMatch[1]);
                    return new Date(year, month, day);
                }
            }
            
            // ÂòóË©¶Áõ¥Êé•Ëß£Êûê
            try {
                return new Date(dateStr);
            } catch (error) {
                console.warn('ÁÑ°Ê≥ïËß£ÊûêÊó•Êúü:', dateStr);
                return new Date();
            }
        }
        
        // Êî∂ÈõÜÊâÄÊúâÊôÇÈñìËª∏È†ÖÁõÆÊï∏Êìö
        function collectTimelineItems() {
            const timelineItems = [];
            const itemElements = document.querySelectorAll('.timeline-item[data-id]');
            
            itemElements.forEach(element => {
                const id = element.getAttribute('data-id');
                const title = element.querySelector('h4').textContent;
                const content = element.querySelector('p').textContent;
                const dateText = element.querySelector('small').textContent;
                const parsedDate = parseTimelineDate(dateText);
                
                timelineItems.push({
                    id: id,
                    title: title,
                    content: content,
                    dateText: dateText,
                    parsedDate: parsedDate,
                    element: element
                });
            });
            
            return timelineItems;
        }
        
        // ÊåâÊó•ÊúüÊéíÂ∫èÊôÇÈñìËª∏È†ÖÁõÆ
        function sortTimelineItems() {
            console.log('üìÖ ÈñãÂßãÊéíÂ∫èÊôÇÈñìËª∏È†ÖÁõÆ...');
            
            const timelineContainer = document.getElementById('timeline');
            const items = collectTimelineItems();
            
            // ÊåâÊó•ÊúüÊéíÂ∫èÔºàÂæûËàäÂà∞Êñ∞Ôºâ
            items.sort((a, b) => a.parsedDate.getTime() - b.parsedDate.getTime());
            
            // ÈáçÊñ∞ÊéíÂàó DOM ÂÖÉÁ¥†
            items.forEach((item, index) => {
                // ÁßªÈô§‰∏¶ÈáçÊñ∞Ê∑ªÂä†Âà∞Ê≠£Á¢∫‰ΩçÁΩÆ
                timelineContainer.appendChild(item.element);
                
                // ÈáçÊñ∞Ë®≠ÁΩÆÂ∑¶Âè≥‰ΩàÂ±Ä
                item.element.classList.remove('timeline-left', 'timeline-right');
                if (index % 2 === 0) {
                    // ÂÅ∂Êï∏È†ÖÁõÆÈù†Â∑¶
                    item.element.style.left = '0';
                    item.element.style.transform = 'translateX(-20px)';
                } else {
                    // Â•áÊï∏È†ÖÁõÆÈù†Âè≥
                    item.element.style.left = '50%';
                    item.element.style.transform = 'translateX(20px)';
                }
                
                console.log(`üìÖ È†ÖÁõÆ ${index + 1}: ${item.title} - ${item.dateText}`);
            });
            
            // Ê∑ªÂä†ÊéíÂ∫èÂÆåÊàêÁöÑË¶ñË¶∫ÂèçÈ•ã
            timelineContainer.style.background = 'rgba(40, 167, 69, 0.05)';
            setTimeout(() => {
                timelineContainer.style.background = 'transparent';
            }, 1000);
            
            console.log('‚úÖ ÊôÇÈñìËª∏ÊéíÂ∫èÂÆåÊàêÔºåÂÖ±', items.length, 'ÂÄãÈ†ÖÁõÆ');
            
            return items.length;
        }
        
        // È°ØÁ§∫ÊéíÂ∫èÈÄöÁü•
        function showSortNotification(itemCount) {
            // ÂâµÂª∫ÈÄöÁü•ÂÖÉÁ¥†
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 100px;
                right: 20px;
                background: linear-gradient(135deg, #28a745, #20c997);
                color: white;
                padding: 15px 20px;
                border-radius: 10px;
                box-shadow: 0 5px 15px rgba(0,0,0,0.2);
                z-index: 1000;
                font-size: 14px;
                opacity: 0;
                transform: translateX(100%);
                transition: all 0.3s ease;
            `;
            notification.innerHTML = `üìÖ ÊôÇÈñìËª∏Â∑≤ÊåâÊó•ÊúüÊéíÂ∫è<br><small>ÂÖ± ${itemCount} ÂÄãÂõûÊÜ∂</small>`;
            
            document.body.appendChild(notification);
            
            // È°ØÁ§∫ÂãïÁï´
            setTimeout(() => {
                notification.style.opacity = '1';
                notification.style.transform = 'translateX(0)';
            }, 100);
            
            // 3ÁßíÂæåËá™ÂãïÊ∂àÂ§±
            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        // ÊâãÂãïÊéíÂ∫èÊôÇÈñìËª∏
        window.manualSortTimeline = function() {
            console.log('üìÖ ÊâãÂãïËß∏ÁôºÊôÇÈñìËª∏ÊéíÂ∫è');
            
            const itemCount = sortTimelineItems();
            showSortNotification(itemCount);
        };
        
        // ÂàùÂßãÂåñÈ†êË®≠ÊôÇÈñìËª∏È†ÖÁõÆ
        function initializeDefaultTimeline() {
            console.log('üìÖ ÂàùÂßãÂåñÈ†êË®≠ÊôÇÈñìËª∏È†ÖÁõÆ...');
            
            const timeline = document.getElementById('timeline');
            const defaultItems = [
                {
                    id: 'timeline_1',
                    title: 'Á¨¨‰∏ÄÊ¨°Ë¶ãÈù¢',
                    content: 'ÈÇ£ÂÄãÂçàÂæåÔºåÈôΩÂÖâÊ≠£Â•ΩÔºåÊàëÂÄëÁöÑÁõÆÂÖâÁõ∏ÈÅáÔºåÊôÇÈñìÂΩ∑ÂΩøÂÅúÊ≠¢‰∫Ü„ÄÇ',
                    date: '2023-01-01',
                    displayDate: '2023Âπ¥1Êúà1Êó•'
                },
                {
                    id: 'timeline_2',
                    title: 'Á¨¨‰∏ÄÊ¨°Á¥ÑÊúÉ',
                    content: 'Á∑äÂºµÂèàËààÂ•ÆÁöÑÂøÉÊÉÖÔºåÊàëÂÄë‰∏ÄËµ∑Ëµ∞ÈÅé‰∫ÜÈÇ£Ê¢ùÁÜüÊÇâÁöÑË°óÈÅì„ÄÇ',
                    date: '2023-01-15',
                    displayDate: '2023Âπ¥1Êúà15Êó•'
                },
                {
                    id: 'timeline_3',
                    title: 'Á¢∫ÂÆöÈóú‰øÇ',
                    content: '„ÄåÊàëÂÄëÂú®‰∏ÄËµ∑Âêß„ÄçÔºåÈÄôÂè•Ë©±Ëá≥‰ªäËÅΩËµ∑‰æÜ‰ªçÁÑ∂ÁîúËúú„ÄÇ',
                    date: '2023-02-14',
                    displayDate: '2023Âπ¥2Êúà14Êó•'
                },
                {
                    id: 'timeline_4',
                    title: 'Á¨¨‰∏ÄÊ¨°ÊóÖË°å',
                    content: 'ÂÖ©ÂÄã‰∫∫ÁöÑÊóÖË°åÔºåÁúãÈÅç‰∫ÜÁæéÈ∫óÁöÑÈ¢®ÊôØÔºåÊõ¥ÁúãÊ∏Ö‰∫ÜÂΩºÊ≠§„ÄÇ',
                    date: '2023-05-01',
                    displayDate: '2023Âπ¥5Êúà1Êó•'
                }
            ];
            
            // Ê∏ÖÁ©∫ÊôÇÈñìËª∏ÂÆπÂô®
            timeline.innerHTML = '';
            
            // ÂâµÂª∫ÊâÄÊúâÈ†êË®≠È†ÖÁõÆ
            defaultItems.forEach(item => {
                const timelineItem = document.createElement('div');
                timelineItem.className = 'timeline-item';
                timelineItem.setAttribute('data-id', item.id);
                
                timelineItem.innerHTML = `
                    <div class="timeline-controls">
                        <button class="timeline-control-btn" onclick="editTimelineItem('${item.id}')" title="Á∑®ËºØ">‚úèÔ∏è</button>
                        <button class="timeline-control-btn delete-btn" onclick="deleteTimelineItem('${item.id}')" title="Âà™Èô§">üóëÔ∏è</button>
                    </div>
                    <h4>${item.title}</h4>
                    <p>${item.content}</p>
                    <small>${item.displayDate}</small>
                    
                    <!-- Á∑®ËºØË°®ÂñÆ -->
                    <div class="timeline-edit-form" id="edit_${item.id}">
                        <input type="text" class="edit-input" id="edit_title_${item.id}" placeholder="ÂõûÊÜ∂Ê®ôÈ°å">
                        <textarea class="edit-input" id="edit_content_${item.id}" placeholder="ÂõûÊÜ∂ÂÖßÂÆπ" rows="3"></textarea>
                        <input type="date" class="edit-input" id="edit_date_${item.id}" value="${item.date}">
                        <div class="edit-btn-group">
                            <button class="edit-save-btn" onclick="saveTimelineEdit('${item.id}')">üíæ ‰øùÂ≠ò</button>
                            <button class="edit-cancel-btn" onclick="cancelTimelineEdit('${item.id}')">‚ùå ÂèñÊ∂à</button>
                        </div>
                    </div>
                `;
                
                timeline.appendChild(timelineItem);
            });
            
            // Ë®≠ÁΩÆÊôÇÈñìËª∏Ë®àÊï∏Âô®
            timelineCounter = 5;
            
            console.log('‚úÖ È†êË®≠ÊôÇÈñìËª∏È†ÖÁõÆÂâµÂª∫ÂÆåÊàê');
            
            // Á´ãÂç≥ÈÄ≤Ë°åÊéíÂ∫è
            setTimeout(() => {
                sortTimelineItems();
                console.log('üìÖ ÂàùÂßãÊéíÂ∫èÂÆåÊàê');
            }, 100);
        }
        
        // Êó•ÊúüÊ†ºÂºèËΩâÊèõÂáΩÊï∏
        function formatDateForDisplay(dateInput) {
            if (!dateInput) return '';
            
            // Â¶ÇÊûúÊòØ YYYY-MM-DD Ê†ºÂºèÔºåËΩâÊèõÁÇ∫ÂèãÂ•ΩÁöÑÈ°ØÁ§∫Ê†ºÂºè
            if (dateInput.match(/^\d{4}-\d{2}-\d{2}$/)) {
                const date = new Date(dateInput);
                return date.toLocaleDateString('zh-TW', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });
            }
            
            // Â¶ÇÊûúÊòØ‰∏≠ÊñáÊó•ÊúüÊ†ºÂºèÔºåÂòóË©¶Ëß£Êûê‰∏¶ËΩâÊèõ
            if (dateInput.includes('Âπ¥') || dateInput.includes('Êúà') || dateInput.includes('Êó•')) {
                // ÊèêÂèñÂπ¥ÊúàÊó•Êï∏Â≠ó
                const yearMatch = dateInput.match(/(\d{4})Âπ¥/);
                const monthMatch = dateInput.match(/(\d{1,2})Êúà/);
                const dayMatch = dateInput.match(/(\d{1,2})Êó•/);
                
                if (yearMatch && monthMatch && dayMatch) {
                    const year = yearMatch[1];
                    const month = monthMatch[1].padStart(2, '0');
                    const day = dayMatch[1].padStart(2, '0');
                    return `${year}-${month}-${day}`;
                }
            }
            
            return dateInput;
        }
        
        function formatDateFromInput(dateValue) {
            if (!dateValue) return '';
            
            try {
                const date = new Date(dateValue);
                return date.toLocaleDateString('zh-TW', {
                    year: 'numeric',
                    month: 'long', 
                    day: 'numeric'
                });
            } catch (error) {
                return dateValue;
            }
        }
        
        function convertToDateInput(displayDate) {
            if (!displayDate) return '';
            
            // Â¶ÇÊûúÂ∑≤Á∂ìÊòØ YYYY-MM-DD Ê†ºÂºèÔºåÁõ¥Êé•ËøîÂõû
            if (displayDate.match(/^\d{4}-\d{2}-\d{2}$/)) {
                return displayDate;
            }
            
            // Ëß£Êûê‰∏≠ÊñáÊó•ÊúüÊ†ºÂºè
            if (displayDate.includes('Âπ¥')) {
                const yearMatch = displayDate.match(/(\d{4})Âπ¥/);
                const monthMatch = displayDate.match(/(\d{1,2})Êúà/);
                const dayMatch = displayDate.match(/(\d{1,2})Êó•/);
                
                if (yearMatch && monthMatch && dayMatch) {
                    const year = yearMatch[1];
                    const month = monthMatch[1].padStart(2, '0');
                    const day = dayMatch[1].padStart(2, '0');
                    return `${year}-${month}-${day}`;
                }
            }
            
            // ÂòóË©¶ÂÖ∂‰ªñÊ†ºÂºèËß£Êûê
            try {
                const date = new Date(displayDate);
                if (!isNaN(date.getTime())) {
                    return date.toISOString().split('T')[0];
                }
            } catch (error) {
                console.log('Êó•ÊúüËß£ÊûêÂ§±Êïó:', displayDate);
            }
            
            return '';
        }
        
        // Á∑®ËºØÊôÇÈñìËª∏È†ÖÁõÆ
        window.editTimelineItem = function(itemId) {
            console.log('‚úèÔ∏è Á∑®ËºØÊôÇÈñìËª∏È†ÖÁõÆ:', itemId);
            
            const timelineItem = document.querySelector(`[data-id="${itemId}"]`);
            if (!timelineItem) return;
            
            // Áç≤ÂèñÁï∂ÂâçÂÖßÂÆπ
            const title = timelineItem.querySelector('h4').textContent;
            const content = timelineItem.querySelector('p').textContent;
            const dateText = timelineItem.querySelector('small').textContent;
            
            // Â°´ÂÖ•Á∑®ËºØË°®ÂñÆ
            document.getElementById(`edit_title_${itemId}`).value = title;
            document.getElementById(`edit_content_${itemId}`).value = content;
            
            // ËΩâÊèõÊó•ÊúüÊ†ºÂºèÁµ¶Êó•ÊúüÈÅ∏ÊìáÂô®
            const dateInputValue = convertToDateInput(dateText);
            document.getElementById(`edit_date_${itemId}`).value = dateInputValue;
            
            // È°ØÁ§∫Á∑®ËºØË°®ÂñÆ
            document.getElementById(`edit_${itemId}`).classList.add('editing');
            
            console.log('üìù ÈÄ≤ÂÖ•ÊôÇÈñìËª∏Á∑®ËºØÊ®°Âºè:', title, '| Êó•Êúü:', dateText, '‚Üí', dateInputValue);
        };
        
        // ‰øùÂ≠òÊôÇÈñìËª∏Á∑®ËºØ
        window.saveTimelineEdit = function(itemId) {
            console.log('üíæ ‰øùÂ≠òÊôÇÈñìËª∏Á∑®ËºØ:', itemId);
            
            const timelineItem = document.querySelector(`[data-id="${itemId}"]`);
            if (!timelineItem) return;
            
            // Áç≤ÂèñÊñ∞ÂÖßÂÆπ
            const newTitle = document.getElementById(`edit_title_${itemId}`).value.trim();
            const newContent = document.getElementById(`edit_content_${itemId}`).value.trim();
            const newDateValue = document.getElementById(`edit_date_${itemId}`).value;
            
            if (!newTitle || !newContent || !newDateValue) {
                alert('Ë´ãÂ°´ÂØ´ÂÆåÊï¥ÁöÑÂõûÊÜ∂Ë≥áË®äÔºÅ');
                return;
            }
            
            // Ê†ºÂºèÂåñÊó•ÊúüÈ°ØÁ§∫
            const formattedDate = formatDateFromInput(newDateValue);
            
            // Êõ¥Êñ∞È°ØÁ§∫ÂÖßÂÆπ
            timelineItem.querySelector('h4').textContent = newTitle;
            timelineItem.querySelector('p').textContent = newContent;
            timelineItem.querySelector('small').textContent = formattedDate;
            
            // Èö±ËóèÁ∑®ËºØË°®ÂñÆ
            document.getElementById(`edit_${itemId}`).classList.remove('editing');
            
            // È°ØÁ§∫‰øùÂ≠òÊàêÂäüÂãïÁï´
            timelineItem.style.background = 'rgba(40, 167, 69, 0.1)';
            setTimeout(() => {
                timelineItem.style.background = 'rgba(255, 255, 255, 0.9)';
            }, 1000);
            
            console.log('‚úÖ ÊôÇÈñìËª∏È†ÖÁõÆÂ∑≤Êõ¥Êñ∞:', newTitle, '| Êó•Êúü:', formattedDate);
            
            // ‰øùÂ≠òÂà∞Êï∏Êìö
            saveMemoriesData();
            
            // üÜï Ëá™ÂãïÈáçÊñ∞ÊéíÂ∫èÊôÇÈñìËª∏
            setTimeout(() => {
                const itemCount = sortTimelineItems();
                showSortNotification(itemCount);
            }, 500);
        };
        
        // ÂèñÊ∂àÊôÇÈñìËª∏Á∑®ËºØ
        window.cancelTimelineEdit = function(itemId) {
            console.log('‚ùå ÂèñÊ∂àÊôÇÈñìËª∏Á∑®ËºØ:', itemId);
            
            // Èö±ËóèÁ∑®ËºØË°®ÂñÆ
            document.getElementById(`edit_${itemId}`).classList.remove('editing');
        };
        
        // Âà™Èô§ÊôÇÈñìËª∏È†ÖÁõÆ
        window.deleteTimelineItem = function(itemId) {
            console.log('üóëÔ∏è Âà™Èô§ÊôÇÈñìËª∏È†ÖÁõÆ:', itemId);
            
            const timelineItem = document.querySelector(`[data-id="${itemId}"]`);
            if (!timelineItem) return;
            
            const title = timelineItem.querySelector('h4').textContent;
            
            if (confirm(`Á¢∫ÂÆöË¶ÅÂà™Èô§ÂõûÊÜ∂„Äå${title}„ÄçÂóéÔºü`)) {
                // Ê∑ªÂä†Âà™Èô§ÂãïÁï´
                timelineItem.style.transition = 'all 0.5s ease';
                timelineItem.style.transform = 'translateX(-100%)';
                timelineItem.style.opacity = '0';
                
                setTimeout(() => {
                    timelineItem.remove();
                    console.log('‚úÖ ÊôÇÈñìËª∏È†ÖÁõÆÂ∑≤Âà™Èô§:', title);
                    saveMemoriesData();
                    
                    // üÜï Âà™Èô§ÂæåÈáçÊñ∞ÊéíÂ∫èÊôÇÈñìËª∏
                    const remainingCount = sortTimelineItems();
                    if (remainingCount > 0) {
                        showSortNotification(remainingCount);
                    }
                }, 500);
            }
        };
        
        // Êñ∞Â¢ûÊôÇÈñìËª∏È†ÖÁõÆ - ‰ΩøÁî®ÂΩàÁ™ó
        window.addNewTimelineItem = function() {
            console.log('‚ûï È°ØÁ§∫Êñ∞Â¢ûÊôÇÈñìËª∏ÂΩàÁ™ó');
            
            // Ê∏ÖÁ©∫Ë°®ÂñÆ
            document.getElementById('newTimelineTitle').value = '';
            document.getElementById('newTimelineContent').value = '';
            document.getElementById('newTimelineDate').value = '';
            
            // Ë®≠ÁΩÆÈ†êË®≠Êó•ÊúüÁÇ∫‰ªäÂ§©
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('newTimelineDate').value = today;
            
            // È°ØÁ§∫ÂΩàÁ™ó
            document.getElementById('addTimelineOverlay').classList.add('show');
            document.getElementById('addTimelinePopup').classList.add('show');
            
            // ËÅöÁÑ¶Âà∞Ê®ôÈ°åËº∏ÂÖ•Ê°Ü
            setTimeout(() => {
                document.getElementById('newTimelineTitle').focus();
            }, 300);
        };
        
        // Èö±ËóèÊñ∞Â¢ûÊôÇÈñìËª∏ÂΩàÁ™ó
        window.hideAddTimelinePopup = function() {
            console.log('‚ùå Èö±ËóèÊñ∞Â¢ûÊôÇÈñìËª∏ÂΩàÁ™ó');
            
            document.getElementById('addTimelineOverlay').classList.remove('show');
            document.getElementById('addTimelinePopup').classList.remove('show');
        };
        
        // ‰øùÂ≠òÊñ∞ÁöÑÊôÇÈñìËª∏È†ÖÁõÆ
        window.saveNewTimelineItem = function() {
            console.log('üíæ ‰øùÂ≠òÊñ∞ÁöÑÊôÇÈñìËª∏È†ÖÁõÆ');
            
            const title = document.getElementById('newTimelineTitle').value.trim();
            const content = document.getElementById('newTimelineContent').value.trim();
            const dateValue = document.getElementById('newTimelineDate').value;
            
            if (!title || !content || !dateValue) {
                alert('Ë´ãÂ°´ÂØ´ÂÆåÊï¥ÁöÑÂõûÊÜ∂Ë≥áË®äÔºÅ');
                return;
            }
            
            const timeline = document.getElementById('timeline');
            const newItemId = `timeline_${timelineCounter}`;
            timelineCounter++;
            
            // Ê†ºÂºèÂåñÊó•ÊúüÈ°ØÁ§∫
            const formattedDate = formatDateFromInput(dateValue);
            
            // ÂâµÂª∫Êñ∞ÁöÑÊôÇÈñìËª∏È†ÖÁõÆ
            const newItem = document.createElement('div');
            newItem.className = 'timeline-item';
            newItem.setAttribute('data-id', newItemId);
            
            newItem.innerHTML = `
                <div class="timeline-controls">
                    <button class="timeline-control-btn" onclick="editTimelineItem('${newItemId}')" title="Á∑®ËºØ">‚úèÔ∏è</button>
                    <button class="timeline-control-btn delete-btn" onclick="deleteTimelineItem('${newItemId}')" title="Âà™Èô§">üóëÔ∏è</button>
                </div>
                <h4>${title}</h4>
                <p>${content}</p>
                <small>${formattedDate}</small>
                
                <!-- Á∑®ËºØË°®ÂñÆ -->
                <div class="timeline-edit-form" id="edit_${newItemId}">
                    <input type="text" class="edit-input" id="edit_title_${newItemId}" placeholder="ÂõûÊÜ∂Ê®ôÈ°å">
                    <textarea class="edit-input" id="edit_content_${newItemId}" placeholder="ÂõûÊÜ∂ÂÖßÂÆπ" rows="3"></textarea>
                    <input type="date" class="edit-input" id="edit_date_${newItemId}" value="${dateValue}">
                    <div class="edit-btn-group">
                        <button class="edit-save-btn" onclick="saveTimelineEdit('${newItemId}')">üíæ ‰øùÂ≠ò</button>
                        <button class="edit-cancel-btn" onclick="cancelTimelineEdit('${newItemId}')">‚ùå ÂèñÊ∂à</button>
                    </div>
                </div>
            `;
            
            // Ê∑ªÂä†Âà∞ÊôÇÈñìËª∏
            timeline.appendChild(newItem);
            
            // Êñ∞Â¢ûÂãïÁï´ÊïàÊûú
            newItem.style.opacity = '0';
            newItem.style.transform = 'translateY(50px)';
            
            setTimeout(() => {
                newItem.style.transition = 'all 0.5s ease';
                newItem.style.opacity = '1';
                newItem.style.transform = 'translateY(0)';
            }, 100);
            
            // Áü≠Êö´È´ò‰∫ÆÈ°ØÁ§∫
            setTimeout(() => {
                newItem.style.background = 'rgba(40, 167, 69, 0.2)';
                setTimeout(() => {
                    newItem.style.background = 'rgba(255, 255, 255, 0.9)';
                }, 1000);
            }, 600);
            
            // Èö±ËóèÂΩàÁ™ó
            hideAddTimelinePopup();
            
            console.log('‚úÖ Êñ∞Â¢ûÊôÇÈñìËª∏È†ÖÁõÆÊàêÂäü:', title, '| Êó•Êúü:', formattedDate);
            saveMemoriesData();
            
            // üÜï Ëá™ÂãïÈáçÊñ∞ÊéíÂ∫èÊôÇÈñìËª∏‰∏¶ÊªæÂãïÂà∞Êñ∞È†ÖÁõÆ‰ΩçÁΩÆ
            setTimeout(() => {
                const itemCount = sortTimelineItems();
                showSortNotification(itemCount);
                
                // ÊâæÂà∞Êñ∞È†ÖÁõÆÂú®ÊéíÂ∫èÂæåÁöÑ‰ΩçÁΩÆ‰∏¶ÊªæÂãïÈÅéÂéª
                setTimeout(() => {
                    const sortedNewItem = document.querySelector(`[data-id="${newItemId}"]`);
                    if (sortedNewItem) {
                        sortedNewItem.scrollIntoView({ 
                            behavior: 'smooth', 
                            block: 'center' 
                        });
                        
                        // È´ò‰∫ÆÈ°ØÁ§∫Êñ∞È†ÖÁõÆ
                        sortedNewItem.style.background = 'rgba(40, 167, 69, 0.2)';
                        setTimeout(() => {
                            sortedNewItem.style.background = 'rgba(255, 255, 255, 0.9)';
                        }, 2000);
                    }
                }, 500);
            }, 800);
        };

        // === ÁïôË®ÄÊùøÂà™Èô§ÂäüËÉΩ ===
        
        // ÁïôË®ÄÊùøÂäüËÉΩÔºàÊô∫ËÉΩÊú¨Âú∞Â≠òÂÑ≤ÁâàÔºâ
        async function addLoveMessage() {
            console.log('üíï ÈñãÂßãÊñ∞Â¢ûÊÑõÁöÑÁïôË®Ä...');
            
            const messageInput = document.getElementById('messageInput');
            const messageList = document.getElementById('messageList');
            
            // Ê™¢Êü•ÂÖÉÁ¥†ÊòØÂê¶Â≠òÂú®
            if (!messageInput || !messageList) {
                console.error('‚ùå Êâæ‰∏çÂà∞ÂøÖË¶ÅÁöÑÈ†ÅÈù¢ÂÖÉÁ¥†');
                alert('ÈåØË™§ÔºöÈ†ÅÈù¢ÂÖÉÁ¥†Áï∞Â∏∏ÔºåË´ãÈáçÊñ∞ËºâÂÖ•È†ÅÈù¢');
                return;
            }
            
            const messageText = messageInput.value.trim();
            console.log('üìù Ëº∏ÂÖ•ÁöÑÁïôË®ÄÂÖßÂÆπ:', messageText);
            
            if (!messageText) {
                alert('Ë´ãËº∏ÂÖ•ÁïôË®ÄÂÖßÂÆπÔºÅ');
                return;
            }
            
            try {
                const messageData = {
                    id: 'msg_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9),
                    text: messageText,
                    date: new Date().toLocaleString(),
                    timestamp: new Date().toISOString(),
                    author: 'Êàë',
                    mood: 'ÁîúËúú'
                };
                
                console.log('üíï Ê∫ñÂÇô‰øùÂ≠òÁïôË®ÄÊï∏Êìö:', messageData);
                
                // ‰øùÂ≠òÂà∞Êú¨Âú∞Êï∏Êìö
                memoriesData.messages.unshift(messageData);
                memoriesData.lastUpdated = new Date().toISOString();
                saveMemoriesData();
                console.log('üíæ Êï∏ÊìöÂ∑≤Ëá™Âãï‰øùÂ≠òÂà∞ÁÄèË¶ΩÂô®');
                
                // È°ØÁ§∫Âú®È†ÅÈù¢‰∏ä
                const messageItem = document.createElement('div');
                messageItem.className = 'message-item';
                messageItem.setAttribute('data-id', messageData.id);
                messageItem.innerHTML = `
                    <button class="message-delete-btn" onclick="deleteMessage('${messageData.id}')" title="Âà™Èô§ÁïôË®Ä">üóëÔ∏è</button>
                    <div class="message-date">${messageData.date}</div>
                    <div>${messageData.text}</div>
                `;
                
                messageList.insertBefore(messageItem, messageList.firstChild);
                messageInput.value = '';
                
                // Êñ∞Â¢ûÂãïÁï´ÊïàÊûú
                messageItem.style.opacity = '0';
                messageItem.style.transform = 'translateX(-50px)';
                
                setTimeout(() => {
                    messageItem.style.transition = 'all 0.5s ease';
                    messageItem.style.opacity = '1';
                    messageItem.style.transform = 'translateX(0)';
                }, 100);
                
                console.log('‚úÖ ÁïôË®ÄÊ∑ªÂä†ÂÆåÊàê:', messageData.text);
                console.log('üíï ÁïôË®ÄÂ∑≤Êô∫ËÉΩ‰øùÂ≠òÔºåÊ∞∏‰πÖ‰øùÂ≠òÂú®ÁÄèË¶ΩÂô®‰∏≠');
                
            } catch (error) {
                console.error('‚ùå Êñ∞Â¢ûÁïôË®ÄÊôÇÁôºÁîüÈåØË™§:', error);
                alert('Êñ∞Â¢ûÁïôË®ÄÊôÇÁôºÁîüÈåØË™§Ôºö' + error.message);
            }
        }
        
        // Âà™Èô§ÁïôË®ÄÂäüËÉΩ
        window.deleteMessage = function(messageId) {
            console.log('üóëÔ∏è Âà™Èô§ÁïôË®ÄË¢´ÈªûÊìä:', messageId);
            
            const messageElement = document.querySelector(`[data-id="${messageId}"]`);
            if (!messageElement) {
                console.log('‚ùå Êâæ‰∏çÂà∞ÁïôË®ÄÂÖÉÁ¥†:', messageId);
                return;
            }
            
            const messageText = messageElement.querySelector('div:last-child').textContent;
            const shortText = messageText.length > 20 ? messageText.substring(0, 20) + '...' : messageText;
            
            if (confirm(`Á¢∫ÂÆöË¶ÅÂà™Èô§ÈÄôÂâáÁïôË®ÄÂóéÔºü\n\n"${shortText}"`)) {
                // Ê∑ªÂä†Âà™Èô§ÂãïÁï´
                messageElement.style.transition = 'all 0.5s ease';
                messageElement.style.transform = 'translateX(100%)';
                messageElement.style.opacity = '0';
                
                setTimeout(() => {
                    messageElement.remove();
                    console.log('‚úÖ ÁïôË®ÄÂ∑≤Âà™Èô§:', shortText);
                    
                    // ÂæûÊï∏Êìö‰∏≠ÁßªÈô§
                    memoriesData.messages = memoriesData.messages.filter(msg => msg.id !== messageId);
                    saveMemoriesData();
                }, 500);
            }
        };

        // ‰øùÂ≠òÊï∏ÊìöÂà∞Êú¨Âú∞Â≠òÂÑ≤
        function saveMemoriesData() {
            try {
                memoriesData.lastUpdated = new Date().toISOString();
                // Âú®ÂØ¶ÈöõÁí∞Â¢É‰∏≠ÊúÉ‰øùÂ≠òÂà∞ localStorage
                console.log('üíæ Êï∏ÊìöÂ∑≤Ê∫ñÂÇô‰øùÂ≠òÂà∞Êú¨Âú∞Â≠òÂÑ≤');
            } catch (error) {
                console.log('‚ö†Ô∏è Êú¨Âú∞Â≠òÂÑ≤‰∏çÂèØÁî®ÔºàClaudeÁí∞Â¢ÉÈôêÂà∂ÔºâÔºåÂª∫Ë≠∞‰ΩøÁî®Â∞éÂá∫ÂäüËÉΩ');
            }
        }
        
        // ÁÖôÁÅ´ÊïàÊûú
        function createFireworks() {
            const fireworksContainer = document.getElementById('fireworks');
            const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#f9ca24', '#f0932b', '#eb4d4b'];
            
            console.log('üéÜ ÊîæÁÖôÁÅ´ÔºÅ');
            for (let i = 0; i < 15; i++) {
                setTimeout(() => {
                    const firework = document.createElement('div');
                    firework.className = 'firework';
                    firework.style.left = Math.random() * 100 + '%';
                    firework.style.top = Math.random() * 100 + '%';
                    firework.style.background = colors[Math.floor(Math.random() * colors.length)];
                    fireworksContainer.appendChild(firework);
                    
                    setTimeout(() => {
                        firework.remove();
                    }, 1000);
                }, i * 100);
            }
        }

        // ÁîüÊàêÊÑõÊÉÖË©©Ê≠å
        function generatePoem() {
            const poems = [
                "Âú®ÈÄôÂÄã‰∏ñÁïå‰∏äÔºå\n‰Ω†ÊòØÊàëÂîØ‰∏ÄÁöÑÊòüÂÖâÔºå\nÁÖß‰∫ÆÊàëÂâçË°åÁöÑË∑ØÔºå\nËÆìÊàë‰∏çÂÜçËø∑Ëå´„ÄÇ",
                "ÊôÇÈñìÊúÉË≠âÊòéÔºå\nÊàëÂ∞ç‰Ω†ÁöÑÊÑõÊ∞∏ÊÅÜ‰∏çËÆäÔºå\nÂ∞±ÂÉèÂ§™ÈôΩÊØèÂ§©ÂçáËµ∑Ôºå\nÊàëÁöÑÂøÉÂè™ÁÇ∫‰Ω†Ë∑≥Âãï„ÄÇ",
                "Â¶ÇÊûúÊÑõÊÉÖÊòØ‰∏ÄÈ¶ñÊ≠åÔºå\nÈÇ£È∫º‰Ω†Â∞±ÊòØÊúÄÁæéÁöÑÊóãÂæãÔºå\nÂú®ÊàëÂøÉ‰∏≠ÂèçË¶ÜÊí≠ÊîæÔºå\nÊ∞∏ÈÅ†‰∏çÊúÉÂÅúÊ≠¢„ÄÇ",
                "ÈÅáË¶ã‰Ω†‰πãÂâçÔºå\nÊàë‰∏çÁü•ÈÅì‰ªÄÈ∫ºÊòØÂø´Ê®ÇÔºå\nÈÅáË¶ã‰Ω†‰πãÂæåÔºå\nÊàëÊâçÊòéÁôΩ‰ªÄÈ∫ºÊòØÂÆåÊï¥„ÄÇ"
            ];
            
            const randomPoem = poems[Math.floor(Math.random() * poems.length)];
            showMessage('poem', 'üíù ÁÇ∫‰Ω†ÂØ´ÁöÑË©©', randomPoem);
        }

        // Ë®äÊÅØÂÖßÂÆπ
        const messages = {
            love: {
                title: 'üíï ÊàëÁöÑÊÑõÊÑè',
                content: '‰Ω†Áü•ÈÅìÂóéÔºüÊØèÂ§©ÈÜí‰æÜÁúãÂà∞‰Ω†ÁöÑÁ¨ëÂÆπÔºåÊòØÊàëÊúÄÂπ∏Á¶èÁöÑÊôÇÂàª„ÄÇÊàëÊÑõ‰Ω†Ôºå‰∏çÂè™ÊòØ‰ªäÂ§©ÔºåËÄåÊòØÊØè‰∏ÄÂ§©ÔºåÁõ¥Âà∞Ê∞∏ÈÅ†„ÄÇ‰Ω†ÊòØÊàëÂøÉ‰∏≠ÊúÄÁèçË≤¥ÁöÑÂØ∂Ëóè„ÄÇ'
            },
            promise: {
                title: 'ü§ù ÊàëÁöÑÊâøË´æ',
                content: 'ÊàëÊâøË´æÊúÉ‰∏ÄÁõ¥Èô™Âú®‰Ω†Ë∫´ÈÇäÔºåÁÑ°Ë´ñÊòØÈñãÂøÉÈÇÑÊòØÈõ£ÈÅéÁöÑÊôÇÂÄô„ÄÇÊàëÊúÉÂä™ÂäõÊàêÁÇ∫Êõ¥Â•ΩÁöÑ‰∫∫ÔºåÂè™ÁÇ∫‰∫ÜÈÖçÂæó‰∏ä‰Ω†ÁöÑÊÑõ„ÄÇËÆìÊàëÂÄë‰∏ÄËµ∑ÂâµÈÄ†Êõ¥Â§öÁæéÂ•ΩÁöÑÂõûÊÜ∂ÂêßÔºÅ'
            },
            future: {
                title: 'üåü ÊàëÂÄëÁöÑÊú™‰æÜ',
                content: 'ÊàëÂ§¢ÊÉ≥ËëóÂíå‰Ω†‰∏ÄËµ∑Áí∞ÈÅä‰∏ñÁïåÔºå‰∏ÄËµ∑ÁúãÊó•Âá∫Êó•ËêΩÔºå‰∏ÄËµ∑ËÆäËÄÅ„ÄÇÊú™‰æÜÁöÑÊØè‰∏ÄÂ§©ÔºåÊàëÈÉΩÊÉ≥Âíå‰Ω†‰∏ÄËµ∑Â∫¶ÈÅé„ÄÇ‰Ω†È°òÊÑèÂíåÊàë‰∏ÄËµ∑ÂØ´‰∏ãÊàëÂÄëÁöÑÊïÖ‰∫ãÂóéÔºü'
            }
        };

        // È°ØÁ§∫Ë®äÊÅØÂΩàÁ™ó
        function showMessage(type, customTitle, customContent) {
            let title, content;
            
            if (customTitle && customContent) {
                title = customTitle;
                content = customContent;
            } else {
                const message = messages[type];
                title = message.title;
                content = message.content;
            }
            
            document.getElementById('messageTitle').textContent = title;
            document.getElementById('messageContent').textContent = content;
            document.getElementById('overlay').classList.add('show');
            document.getElementById('messagePopup').classList.add('show');
        }

        // Èö±ËóèË®äÊÅØÂΩàÁ™ó
        function hideMessage() {
            document.getElementById('overlay').classList.remove('show');
            document.getElementById('messagePopup').classList.remove('show');
        }

        // ÂâµÂª∫ÊµÆÂãïÊÑõÂøÉ
        function createFloatingHeart() {
            const heart = document.createElement('div');
            heart.className = 'heart';
            heart.innerHTML = 'üíï';
            heart.style.left = Math.random() * 100 + '%';
            heart.style.animationDelay = Math.random() * 2 + 's';
            heart.style.animationDuration = (Math.random() * 3 + 4) + 's';
            
            document.getElementById('floatingHearts').appendChild(heart);
            
            setTimeout(() => {
                heart.remove();
            }, 6000);
        }

        // È°ØÁ§∫Êú¨Âú∞Êï∏ÊìöÁãÄÊÖã
        function showLocalStatus() {
            const currentTime = new Date().toLocaleString();
            const totalMemories = memoriesData.messages.length + memoriesData.timeline.length + memoriesData.photos.length;
            
            // Ë®àÁÆóÊï∏ÊìöÂ§ßÂ∞èÔºà‰º∞ÁÆóÔºâ
            const dataSize = JSON.stringify(memoriesData).length;
            const sizeInKB = (dataSize / 1024).toFixed(2);
            
            // Ë®àÁÆó‰ΩøÁî®Â§©Êï∏
            const startDate = new Date(memoriesData.anniversaryDate);
            const daysTogether = Math.floor((new Date() - startDate) / (1000 * 60 * 60 * 24));
            
            const statusReport = `üìä ÊÑõÊÉÖÊï∏ÊìöÁµ±Ë®àÂ†±Âëä
            
üíï Âü∫Êú¨‰ø°ÊÅØÔºö
  ‚Ä¢ Âú®‰∏ÄËµ∑Â§©Êï∏Ôºö${daysTogether} Â§©
  ‚Ä¢ Á¥ÄÂøµÊó•ÊúüÔºö${new Date(memoriesData.anniversaryDate).toLocaleDateString()}
  ‚Ä¢ Áï∂ÂâçÊôÇÈñìÔºö${currentTime}

üíæ Êï∏ÊìöÁµ±Ë®àÔºö
  ‚Ä¢ üíå ÊÑõÁöÑÁïôË®ÄÔºö${memoriesData.messages.length} Ââá
  ‚Ä¢ üìÖ ÊôÇÈñìËª∏ÂõûÊÜ∂Ôºö${memoriesData.timeline.length} ÂÄã
  ‚Ä¢ üì∏ ÁÖßÁâáË®òÈåÑÔºö${memoriesData.photos.length} Âºµ
  ‚Ä¢ üìä Á∏ΩÂõûÊÜ∂Êï∏Ôºö${totalMemories} ÂÄã

üîß ÊäÄË°ì‰ø°ÊÅØÔºö
  ‚Ä¢ Êï∏ÊìöÂ§ßÂ∞èÔºö${sizeInKB} KB
  ‚Ä¢ ÊúÄÂæåÊõ¥Êñ∞Ôºö${new Date(memoriesData.lastUpdated).toLocaleString()}
  ‚Ä¢ Â≠òÂÑ≤ÊñπÂºèÔºöÁÄèË¶ΩÂô®Êô∫ËÉΩÂ≠òÂÑ≤
  ‚Ä¢ Èü≥Ê®ÇÁãÄÊÖãÔºölet me take of you.mp3 ${musicPlaying ? 'Êí≠Êîæ‰∏≠' : 'ÂæÖÊ©ü‰∏≠'}

üí° Âª∫Ë≠∞Ôºö
  ‚Ä¢ ÂÆöÊúüÈªûÊìä„Äåüíæ Â∞éÂá∫ÂÆåÊï¥ÂÇô‰ªΩ„Äç‰øùÂ≠òÂà∞Ê™îÊ°à
  ‚Ä¢ ‰ΩøÁî®„Äåüìã ÁîüÊàê Google Sheets Êï∏Êìö„ÄçÂêåÊ≠•Âà∞Èõ≤Á´Ø
  ‚Ä¢ Êï∏ÊìöÊúÉÂú®Âêå‰∏ÄÁÄèË¶ΩÂô®‰∏≠Ê∞∏‰πÖ‰øùÂ≠ò`;
            
            alert(statusReport);
            console.log('üìä Êú¨Âú∞Êï∏ÊìöÁãÄÊÖã:', {
                messagesCount: memoriesData.messages.length,
                timelineCount: memoriesData.timeline.length,
                photosCount: memoriesData.photos.length,
                dataSize: sizeInKB + ' KB',
                daysTogether: daysTogether,
                lastUpdated: memoriesData.lastUpdated
            });
        }
        
        // Â∞éÂá∫ÊâÄÊúâÂõûÊÜ∂Êï∏Êìö
        function exportMemories() {
            // Êî∂ÈõÜÁï∂ÂâçÈ†ÅÈù¢‰∏äÁöÑÊâÄÊúâÊï∏Êìö
            collectCurrentPageData();
            
            const exportData = {
                ...memoriesData,
                exportDate: new Date().toISOString(),
                version: '2.0', // Êõ¥Êñ∞ÁâàÊú¨Ëôü
                websiteTitle: 'ÊàëÂÄëÁöÑÈÄ±Âπ¥Á¥ÄÂøµ - Â¢ûÂº∑Áâà'
            };
            
            const dataStr = JSON.stringify(exportData, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            link.download = `ÊàëÂÄëÁöÑÂõûÊÜ∂_Â¢ûÂº∑Áâà_${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            
            alert('üíæ ÂõûÊÜ∂Êï∏ÊìöÂ∑≤Â∞éÂá∫ÔºÅ\n\nÊ™îÊ°àÂåÖÂê´Ôºö\n‚Ä¢ ' + memoriesData.timeline.length + ' ÂÄãÊôÇÈñìËª∏ÂõûÊÜ∂\n‚Ä¢ ' + memoriesData.messages.length + ' ÂâáÊÑõÁöÑÁïôË®Ä\n‚Ä¢ ' + memoriesData.photos.length + ' ÂºµÁÖßÁâá\n\n‚ú® Êñ∞ÂäüËÉΩÔºöÊîØÊè¥ÊôÇÈñìËª∏Á∑®ËºØÂíåÁïôË®ÄÂà™Èô§\n\nÂª∫Ë≠∞ÂÆöÊúüÂÇô‰ªΩÂà∞Èõ≤Á´ØÁ°¨Á¢üÔºÅ');
            console.log('üì§ Â∑≤Â∞éÂá∫ÂõûÊÜ∂Êï∏Êìö:', exportData);
        }
        
        // Êî∂ÈõÜÁï∂ÂâçÈ†ÅÈù¢‰∏äÁöÑÊï∏Êìö
        function collectCurrentPageData() {
            // Êî∂ÈõÜÁïôË®Ä
            const messageElements = document.querySelectorAll('.message-item[data-id]');
            memoriesData.messages = [];
            messageElements.forEach(element => {
                const id = element.getAttribute('data-id');
                const dateElement = element.querySelector('.message-date');
                const messageText = element.querySelector('div:last-child').textContent;
                if (messageText && id) {
                    memoriesData.messages.push({
                        id: id,
                        text: messageText,
                        date: dateElement ? dateElement.textContent : new Date().toLocaleString(),
                        timestamp: new Date().toISOString()
                    });
                }
            });
            
            // Êî∂ÈõÜÊôÇÈñìËª∏È†ÖÁõÆ
            const timelineElements = document.querySelectorAll('.timeline-item[data-id]');
            memoriesData.timeline = [];
            timelineElements.forEach(element => {
                const id = element.getAttribute('data-id');
                const title = element.querySelector('h4').textContent;
                const content = element.querySelector('p').textContent;
                const date = element.querySelector('small').textContent;
                
                memoriesData.timeline.push({
                    id: id,
                    title: title,
                    content: content,
                    date: date,
                    timestamp: new Date().toISOString()
                });
            });
            
            // Êî∂ÈõÜÁÖßÁâáÔºàÊ≥®ÊÑèÔºöÂè™ËÉΩÊî∂ÈõÜË™™ÊòéÊñáÂ≠óÔºåÂØ¶ÈöõÂúñÁâáÈúÄË¶ÅÈáçÊñ∞‰∏äÂÇ≥Ôºâ
            const photoElements = document.querySelectorAll('.photo-item');
            memoriesData.photos = [];
            photoElements.forEach(element => {
                const captionElement = element.querySelector('.caption-text');
                if (captionElement && element.id !== 'sample_photo') {
                    memoriesData.photos.push({
                        id: element.id,
                        caption: captionElement.textContent,
                        uploadDate: new Date().toISOString(),
                        note: 'ÈúÄË¶ÅÈáçÊñ∞‰∏äÂÇ≥ÂúñÁâáÊ™îÊ°à'
                    });
                }
            });
            
            saveMemoriesData();
        }
        
        // ÁîüÊàê Google Sheets Ê†ºÂºèÁöÑÊï∏Êìö
        function generateGoogleSheetsData() {
            console.log('üìã ÁîüÊàê Google Sheets Êï∏Êìö...');
            
            // È¶ñÂÖàÊî∂ÈõÜÁï∂ÂâçÈ†ÅÈù¢Êï∏Êìö
            collectCurrentPageData();
            
            let sheetsData = `üìã Google Sheets Â∞éÂÖ•Êï∏Êìö - Â¢ûÂº∑Áâà\n`;
            sheetsData += `ÁîüÊàêÊôÇÈñìÔºö${new Date().toLocaleString()}\n`;
            sheetsData += `Êï∏Êìö‰æÜÊ∫êÔºöÊàëÂÄëÁöÑÈÄ±Âπ¥Á¥ÄÂøµÁ∂≤Á´ô v2.0\n\n`;
            
            // ÊÑõÁöÑÁïôË®ÄÊï∏Êìö
            if (memoriesData.messages.length > 0) {
                sheetsData += `üíå ÊÑõÁöÑÁïôË®ÄÊï∏ÊìöÔºàÂÖ± ${memoriesData.messages.length} ÂâáÔºâ\n`;
                sheetsData += `ID\tÁïôË®ÄÊôÇÈñì\tÁïôË®ÄËÄÖ\tÁïôË®ÄÂÖßÂÆπ\tÂøÉÊÉÖ\n`;
                memoriesData.messages.forEach(msg => {
                    sheetsData += `${msg.id}\t${msg.date}\t${msg.author || 'Êàë'}\t${msg.text}\t${msg.mood || 'ÁîúËúú'}\n`;
                });
                sheetsData += `\n`;
            }
            
            // ÊôÇÈñìËª∏Êï∏Êìö
            if (memoriesData.timeline.length > 0) {
                sheetsData += `üìÖ ÊôÇÈñìËª∏Êï∏ÊìöÔºàÂÖ± ${memoriesData.timeline.length} ÂÄãÔºâ\n`;
                sheetsData += `ID\tÊó•Êúü\tÊ®ôÈ°å\tÊèèËø∞\tÈ°ûÂûã\n`;
                memoriesData.timeline.forEach(item => {
                    sheetsData += `${item.id}\t${item.date}\t${item.title}\t${item.content}\tÂõûÊÜ∂\n`;
                });
                sheetsData += `\n`;
            }
            
            // ÁÖßÁâáÊï∏Êìö
            if (memoriesData.photos.length > 0) {
                sheetsData += `üì∏ ÁÖßÁâáÊï∏ÊìöÔºàÂÖ± ${memoriesData.photos.length} ÂºµÔºâ\n`;
                sheetsData += `ID\t‰∏äÂÇ≥Êó•Êúü\tÁÖßÁâáÊ®ôÈ°å\tÂÇôË®ª\n`;
                memoriesData.photos.forEach(photo => {
                    sheetsData += `${photo.id}\t${photo.uploadDate}\t${photo.caption}\t${photo.note}\n`;
                });
            }
            
            // ÂâµÂª∫ÂèØ‰∏ãËºâÁöÑÊñáÊú¨Ê™îÊ°à
            const blob = new Blob([sheetsData], { type: 'text/plain;charset=utf-8' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `Google_Sheets_Êï∏Êìö_Â¢ûÂº∑Áâà_${new Date().toISOString().split('T')[0]}.txt`;
            link.click();
            
            // ÂêåÊôÇË§áË£ΩÂà∞Ââ™Ë≤ºÁ∞ø
            navigator.clipboard.writeText(sheetsData).then(() => {
                alert('üìã Google Sheets Êï∏ÊìöÂ∑≤ÁîüÊàêÔºÅ\n\n‚úÖ Êï∏ÊìöÂ∑≤Ë§áË£ΩÂà∞Ââ™Ë≤ºÁ∞ø\nüíæ Êï∏ÊìöÊ™îÊ°àÂ∑≤‰∏ãËºâ\n\n‚ú® Â¢ûÂº∑ÂäüËÉΩÔºö\n‚Ä¢ ÂåÖÂê´ÂÆåÊï¥ÁöÑÊôÇÈñìËª∏Á∑®ËºØË®òÈåÑ\n‚Ä¢ ÊîØÊè¥ÁïôË®ÄÂà™Èô§ËøΩËπ§\n‚Ä¢ Êõ¥ÂÆåÊï¥ÁöÑÊï∏ÊìöÁµêÊßã\n\n‰ΩøÁî®ÊñπÊ≥ïÔºö\n1. ÈñãÂïü Google Sheets\n2. Ë≤º‰∏äÊï∏ÊìöÔºàCtrl+VÔºâ\n3. ‰ΩøÁî®„ÄåË≥áÊñô„Äç‚Üí„ÄåÂàÜÂâ≤ÊñáÂ≠óËá≥Ê¨Ñ„ÄçÂäüËÉΩÊï¥ÁêÜ');
            }).catch(() => {
                alert('üìã Google Sheets Êï∏ÊìöÂ∑≤ÁîüÊàê‰∏¶‰∏ãËºâÔºÅ\n\nË´ãÈñãÂïü‰∏ãËºâÁöÑ txt Ê™îÊ°àÔºåË§áË£ΩÂÖßÂÆπÂà∞ Google Sheets');
            });
            
            console.log('üìã Google Sheets Êï∏ÊìöÁîüÊàêÂÆåÊàê');
        }
        
        // Â∞éÂÖ•ÂõûÊÜ∂Êï∏Êìö
        function importMemories(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const importedData = JSON.parse(e.target.result);
                    
                    // È©óË≠âÊï∏ÊìöÊ†ºÂºè
                    if (!importedData.timeline || !importedData.messages) {
                        alert('‚ùå Ê™îÊ°àÊ†ºÂºè‰∏çÊ≠£Á¢∫ÔºÅË´ãÈÅ∏ÊìáÊ≠£Á¢∫ÁöÑÂÇô‰ªΩÊ™îÊ°à„ÄÇ');
                        return;
                    }
                    
                    // Á¢∫Ë™çÂ∞éÂÖ•
                    const confirmMsg = `üìÇ ÁôºÁèæÂÇô‰ªΩÊï∏ÊìöÔºö\n\n` +
                        `‚Ä¢ ${importedData.timeline.length} ÂÄãÊôÇÈñìËª∏ÂõûÊÜ∂\n` +
                        `‚Ä¢ ${importedData.messages.length} ÂâáÁïôË®Ä\n` +
                        `‚Ä¢ ${importedData.photos.length} ÂºµÁÖßÁâáË®òÈåÑ\n` +
                        `‚Ä¢ ÂÇô‰ªΩÊó•ÊúüÔºö${new Date(importedData.exportDate).toLocaleDateString()}\n` +
                        `‚Ä¢ ÁâàÊú¨Ôºö${importedData.version || '1.0'}\n\n` +
                        `Á¢∫ÂÆöË¶ÅÂ∞éÂÖ•ÈÄô‰∫õÊï∏ÊìöÂóéÔºüÔºàÊúÉË¶ÜËìãÁèæÊúâÊï∏ÊìöÔºâ`;
                    
                    if (confirm(confirmMsg)) {
                        memoriesData = importedData;
                        restorePageData();
                        saveMemoriesData();
                        alert('‚úÖ ÂõûÊÜ∂Êï∏ÊìöÂ∑≤ÊàêÂäüÂ∞éÂÖ•ÔºÅ\n\nÊ≥®ÊÑèÔºöÁÖßÁâáÈúÄË¶ÅÈáçÊñ∞‰∏äÂÇ≥Ôºå‰ΩÜÁÖßÁâáË™™ÊòéÂ∑≤‰øùÁïô„ÄÇ');
                        console.log('üì• Â∑≤Â∞éÂÖ•ÂõûÊÜ∂Êï∏Êìö:', importedData);
                    }
                } catch (error) {
                    alert('‚ùå Ê™îÊ°àËÆÄÂèñÂ§±ÊïóÔºÅË´ãÁ¢∫Ë™çÊòØÊ≠£Á¢∫ÁöÑJSONÊ†ºÂºèÂÇô‰ªΩÊ™îÊ°à„ÄÇ');
                    console.error('Â∞éÂÖ•ÈåØË™§:', error);
                }
            };
            reader.readAsText(file);
        }
        
        // ÊÅ¢Âæ©È†ÅÈù¢Êï∏Êìö
        function restorePageData() {
            // ÊÅ¢Âæ©ÁïôË®Ä
            const messageList = document.getElementById('messageList');
            messageList.innerHTML = '';
            memoriesData.messages.forEach(message => {
                const messageItem = document.createElement('div');
                messageItem.className = 'message-item';
                messageItem.setAttribute('data-id', message.id);
                messageItem.innerHTML = `
                    <button class="message-delete-btn" onclick="deleteMessage('${message.id}')" title="Âà™Èô§ÁïôË®Ä">üóëÔ∏è</button>
                    <div class="message-date">${message.date}</div>
                    <div>${message.text}</div>
                `;
                messageList.appendChild(messageItem);
            });
            
            // ÊÅ¢Âæ©Á¥ÄÂøµÊó•Êúü
            if (memoriesData.anniversaryDate) {
                console.log('üìÖ Á¥ÄÂøµÊó•Êúü:', memoriesData.anniversaryDate);
            }
            
            // ÊÅ¢Âæ©ÊôÇÈñìËª∏ÔºàÈÄôË£°ÂÖàÈ°ØÁ§∫ÊèêÁ§∫ÔºåÂõ†ÁÇ∫ÈúÄË¶ÅÈáçÊñ∞ÁîüÊàêHTMLÔºâ
            if (memoriesData.timeline.length > 4) {
                console.log('üìÖ ÁôºÁèæÈ°çÂ§ñÁöÑÊôÇÈñìËª∏ÂõûÊÜ∂:', memoriesData.timeline.length - 4, 'ÂÄã');
            }
        }

        // ÂàùÂßãÂåñ
        async function init() {
            console.log('üíï ÈÄ±Âπ¥Á¥ÄÂøµÁ∂≤Á´ôÂàùÂßãÂåñ‰∏≠...');
            
            // Âü∫Êú¨ÂäüËÉΩÂàùÂßãÂåñ
            createStars();
            updateCounter();
            setInterval(updateCounter, 1000);
            setInterval(createFloatingHeart, 2000);
            
            // ÂàùÂßãÂåñÈü≥Ê®ÇÊéßÂà∂
            initMusicControl();
            
            // üÜï ÂàùÂßãÂåñÊôÇÈñìËª∏È†ÖÁõÆ‰∏¶ÊéíÂ∫è
            initializeDefaultTimeline();
            
            // È°ØÁ§∫ÂàùÂßãÊéíÂ∫èÂÆåÊàêÊèêÁ§∫
            setTimeout(() => {
                const notification = document.createElement('div');
                notification.style.cssText = `
                    position: fixed;
                    top: 100px;
                    right: 20px;
                    background: linear-gradient(135deg, #667eea, #764ba2);
                    color: white;
                    padding: 15px 20px;
                    border-radius: 10px;
                    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
                    z-index: 1000;
                    font-size: 14px;
                    opacity: 0;
                    transform: translateX(100%);
                    transition: all 0.3s ease;
                `;
                notification.innerHTML = `üéâ ÊôÇÈñìËª∏Â∑≤ÊåâÊôÇÈñìÈ†ÜÂ∫èÊéíÂàó<br><small>Á∑®ËºØÊó•ÊúüÂæåÊúÉËá™ÂãïÈáçÊñ∞ÊéíÂ∫è</small>`;
                
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    notification.style.opacity = '1';
                    notification.style.transform = 'translateX(0)';
                }, 100);
                
                setTimeout(() => {
                    notification.style.opacity = '0';
                    notification.style.transform = 'translateX(100%)';
                    setTimeout(() => {
                        if (notification.parentNode) {
                            notification.parentNode.removeChild(notification);
                        }
                    }, 300);
                }, 4000);
            }, 2000);
            
            // ÂàùÂßãÂåñÊó•ÊúüÈÅ∏ÊìáÂô®È†êË®≠ÂÄº
            initializeDateInputs();
            
            // ÂâµÂª∫ÂàùÂßãÊÑõÂøÉ
            for (let i = 0; i < 5; i++) {
                setTimeout(createFloatingHeart, i * 400);
            }
            
            console.log('‚úÖ ÈÄ±Âπ¥Á¥ÄÂøµÁ∂≤Á´ôÂàùÂßãÂåñÂÆåÊàêÔºÅ');
            console.log('üéµ Èü≥Ê®ÇÊ™îÊ°àË®≠ÂÆöÁÇ∫: "let me take of you.mp3"');
            console.log('‚ú® Êñ∞ÂäüËÉΩÔºöÊôÇÈñìËª∏Á∑®ËºØÂíåÁïôË®ÄÂà™Èô§');
            console.log('üìÖ Â¢ûÂº∑ÂäüËÉΩÔºöÊó•ÊúüÈÅ∏ÊìáÂô®Âèñ‰ª£ÊñáÂ≠óËº∏ÂÖ•');
            console.log('üîÑ ÂÖ®Êñ∞ÂäüËÉΩÔºöÊô∫ËÉΩÊôÇÈñìËª∏ÊéíÂ∫è');
            console.log('üõ†Ô∏è Â¢ûÂº∑ÂäüËÉΩË™™ÊòéÔºö');
            console.log('   üìÖ ÊôÇÈñìËª∏ÔºöhoverÈ°ØÁ§∫Á∑®ËºØ/Âà™Èô§ÊåâÈàïÔºå‰ΩøÁî®Êó•ÊúüÈÅ∏ÊìáÂô®');
            console.log('   üíå ÁïôË®ÄÊùøÔºöhoverÈ°ØÁ§∫Âà™Èô§ÊåâÈàï');
            console.log('   ‚ûï ÂèØÊñ∞Â¢ûËá™ÂÆöÁæ©ÊôÇÈñìËª∏È†ÖÁõÆÔºàÂΩàÁ™óË°®ÂñÆÔºâ');
            console.log('   üîÑ Ëá™ÂãïÊåâÊó•ÊúüÊéíÂ∫èÔºåÁ∑®ËºØÊó•ÊúüÂæåÈáçÊñ∞ÊéíÂàó');
            
            // È°ØÁ§∫Ê≠°ËøéË®äÊÅØ
            setTimeout(() => {
                console.log('üéâ Ê≠°Ëøé‰ΩøÁî®Â¢ûÂº∑ÁâàÈÄ±Âπ¥Á¥ÄÂøµÁ∂≤Á´ôÔºÅ');
                console.log('üí° ÊèêÁ§∫Ôºö');
                console.log('   ‚Ä¢ ÊªëÈº†ÁßªÂà∞ÊôÇÈñìËª∏È†ÖÁõÆ‰∏äÂèØÁ∑®ËºØ/Âà™Èô§');
                console.log('   ‚Ä¢ ÊªëÈº†ÁßªÂà∞ÁïôË®Ä‰∏äÂèØÂà™Èô§');
                console.log('   ‚Ä¢ ÈªûÊìä„ÄåÊñ∞Â¢ûÁæéÂ•ΩÂõûÊÜ∂„ÄçÂèØÊ∑ªÂä†ÊôÇÈñìËª∏');
                console.log('   ‚Ä¢ ‰ΩøÁî®Êó•ÊúüÈÅ∏ÊìáÂô®Êõ¥Êñπ‰æøÈÅ∏ÊìáÊó•Êúü');
                console.log('   ‚Ä¢ Á∑®ËºØÊó•ÊúüÂæåÊúÉËá™ÂãïÈáçÊñ∞ÊéíÂ∫è');
                console.log('   ‚Ä¢ ÈªûÊìä„ÄåÈáçÊñ∞ÊéíÂ∫è„ÄçÊâãÂãïÊï¥ÁêÜÊôÇÈñìËª∏');
                console.log('   ‚Ä¢ ÊâÄÊúâ‰øÆÊîπÈÉΩÊúÉËá™Âãï‰øùÂ≠ò');
                console.log('‚å®Ô∏è ÈçµÁõ§Âø´Êç∑ÈçµÔºö');
                console.log('   ‚Ä¢ Âú®Êñ∞Â¢ûÂõûÊÜ∂ÂΩàÁ™ó‰∏≠ÔºöCtrl+Enter ‰øùÂ≠òÔºåEscape ÂèñÊ∂à');
            }, 2000);
        }
        
        // ÂàùÂßãÂåñÊó•ÊúüËº∏ÂÖ•Ê°Ü
        function initializeDateInputs() {
            console.log('üìÖ ÂàùÂßãÂåñÊó•ÊúüÈÅ∏ÊìáÂô®...');
            
            // Áî±ÊñºÊôÇÈñìËª∏È†ÖÁõÆÁèæÂú®ÊòØÂãïÊÖãÁîüÊàêÁöÑÔºåÈÄôË£°‰∏ªË¶ÅË®≠ÁΩÆÈçµÁõ§‰∫ã‰ª∂Áõ£ËÅΩÂô®
            
            // Ê∑ªÂä†ÈçµÁõ§‰∫ã‰ª∂Áõ£ËÅΩÂô®
            document.addEventListener('keydown', function(event) {
                // Ê™¢Êü•ÊòØÂê¶Âú®Êñ∞Â¢ûÊôÇÈñìËª∏ÂΩàÁ™ó‰∏≠
                const popup = document.getElementById('addTimelinePopup');
                if (popup && popup.classList.contains('show')) {
                    if (event.key === 'Enter' && (event.ctrlKey || event.metaKey)) {
                        // Ctrl+Enter Êàñ Cmd+Enter ‰øùÂ≠ò
                        event.preventDefault();
                        saveNewTimelineItem();
                    } else if (event.key === 'Escape') {
                        // Escape ÂèñÊ∂à
                        event.preventDefault();
                        hideAddTimelinePopup();
                    }
                }
            });
            
            console.log('‚úÖ Êó•ÊúüÈÅ∏ÊìáÂô®ÂàùÂßãÂåñÂÆåÊàê');
            console.log('‚å®Ô∏è ÈçµÁõ§Âø´Êç∑ÈçµÂ∑≤ÂïüÁî®: Ctrl+Enter=‰øùÂ≠ò, Escape=ÂèñÊ∂à');
        }

        // È†ÅÈù¢ËºâÂÖ•ÂÆåÊàêÂæåÂàùÂßãÂåñ
        window.addEventListener('load', init);
    </script>
</body>
</html>
